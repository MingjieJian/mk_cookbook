

<!DOCTYPE html>


<html lang="zh-CN" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>PANDORA使用记录 &#8212; MK-cookbook 0.0.1 文档</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js"></script>
    <script src="../_static/translations.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Miscellaneous/pandora';</script>
    <link rel="icon" href="../_static/MK_logo_square.svg"/>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link href="../_static/style.css" rel="stylesheet" type="text/css">

  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/MK_logo_square.svg" class="logo__image only-light" alt="MK-cookbook 0.0.1 文档 - Home"/>
    <script>document.write(`<img src="../_static/MK_logo_square.svg" class="logo__image only-dark" alt="MK-cookbook 0.0.1 文档 - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="搜索" aria-label="搜索" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">搜索</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../pysme/pysme.html">PySME 教程</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../pysme/0-intro.html">0. 这是什么？</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../OASP/OASP.html">恒星光球的观测与分析</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../OASP/OASP_translate/OASP_translate.html">书籍翻译</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../OASP/OASP_translate/second_cover.html">扉页</a></li>
<li class="toctree-l3"><a class="reference internal" href="../OASP/OASP_translate/preface_1.html">第一版序</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../OASP/OASP_note/OASP_note.html">我的笔记</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../OASP/OASP_note/OASP0.html">第零章：前言</a></li>
<li class="toctree-l3"><a class="reference internal" href="../OASP/OASP_note/OASP1.html">第一章</a></li>
<li class="toctree-l3"><a class="reference internal" href="../OASP/OASP_note/OASP2.html">第二章：傅里叶变换</a></li>
<li class="toctree-l3"><a class="reference internal" href="../OASP/OASP_note/OASP3.html">第三章：光谱仪</a></li>
<li class="toctree-l3"><a class="reference internal" href="../OASP/OASP_note/OASP4.html">第四章：光电探测器</a></li>
<li class="toctree-l3"><a class="reference internal" href="../OASP/OASP_note/OASP5.html">第五章：有关辐射的各种定义</a></li>
<li class="toctree-l3"><a class="reference internal" href="../OASP/OASP_note/OASP6.html">第六章：黑体和黑体辐射</a></li>
<li class="toctree-l3"><a class="reference internal" href="../OASP/OASP_note/OASP7.html">第七章：辐射与对流传能</a></li>
<li class="toctree-l3"><a class="reference internal" href="../OASP/OASP_note/OASP8.html">第八章：连续吸收系数</a></li>
<li class="toctree-l3"><a class="reference internal" href="../OASP/OASP_note/OASP9.html">第九章：光球层模型</a></li>
<li class="toctree-l3"><a class="reference internal" href="../OASP/OASP_note/OASP10.html">第十章：连续谱</a></li>
<li class="toctree-l3"><a class="reference internal" href="../OASP/OASP_note/OASP11.html">第十一章：谱线吸收系数</a></li>
<li class="toctree-l3"><a class="reference internal" href="../OASP/OASP_note/OASP12.html">第十二章：谱线的测量</a></li>
<li class="toctree-l3"><a class="reference internal" href="../OASP/OASP_note/OASP13.html">第十三章：谱线的行为</a></li>
<li class="toctree-l3"><a class="reference internal" href="../OASP/OASP_note/OASP14.html">第十四章：半径与有效温度的确定</a></li>
<li class="toctree-l3"><a class="reference internal" href="../OASP/OASP_note/OASP15.html">第十五章：压强的确定</a></li>
<li class="toctree-l3"><a class="reference internal" href="../OASP/OASP_note/OASP16.html">第十六章：化学丰度分析</a></li>
<li class="toctree-l3"><a class="reference internal" href="../OASP/OASP_note/Answers.html">Answers</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../NLTE_model/nlte_model.html">NLTE RT and modelling</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../NLTE_model/rutten_1.html">Rutten - 1</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../NLTE_model/iart1.html">Chapter 1</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../NLTE_model/Avrett_08.html">Introduction to NON-LTE radiative transfer and atmospheric modeling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../NLTE_model/TSA11.html">Chapter 11</a></li>
<li class="toctree-l2"><a class="reference internal" href="../NLTE_model/TSA12.html">Chapter 12</a></li>
<li class="toctree-l2"><a class="reference internal" href="../NLTE_model/TSA18.html">Chapter 18</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Outreach.html">Outreach</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../outreach/2021ssaa_ga_1.html">- 从恒星光谱到恒星参数</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outreach/2021ssaa_ga_answer_1.html">  - 参考解答</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outreach/STU_12.html">- 谱线的形成</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outreach/2021ssaa_ga_2.html">- 银河系化学演化</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outreach/2021ssaa_sr_process.html">- 快过程与慢过程</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outreach/2021ssaa_answer.html">- 练习参考答案</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Miscellaneous.html">Miscellaneous</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="Grid_interpolation.html">Grid interpolation</a></li>
<li class="toctree-l2"><a class="reference internal" href="atlas_cookbook.html">ATLAS Cookbook</a></li>
<li class="toctree-l2"><a class="reference internal" href="residual_of_fitting.html">Residual of fitting</a></li>
<li class="toctree-l2"><a class="reference internal" href="useful-sites.html">Uesful sites</a></li>
<li class="toctree-l2"><a class="reference internal" href="fitting-101.html">Fitting-101</a></li>
<li class="toctree-l2"><a class="reference internal" href="origin_elements.html">Origin of elements</a></li>
<li class="toctree-l2"><a class="reference internal" href="folder_system.html">"standard" folder system</a></li>
<li class="toctree-l2"><a class="reference internal" href="python.html">Jupyter Notebook + Python + Bash 备忘</a></li>






<li class="toctree-l2"><a class="reference internal" href="l_r_ms.html">Variation of luminosity and radius during main-sequence phase</a></li>
<li class="toctree-l2"><a class="reference internal" href="spline.html">Spline function and spline fitting</a></li>
<li class="toctree-l2"><a class="reference internal" href="my_questions.html">我的疑惑</a></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="下载此页面">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/Miscellaneous/pandora.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="下载源文件"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="列印成 PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="全屏模式"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="搜索" aria-label="搜索" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>PANDORA使用记录</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> 目录 </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#fortran">Fortran 编译器选择</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#license">License过期之后</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#csh">安装csh</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#perl">安装Perl</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">文件准备</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">格式大坑</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wup-section-10">元素数据输入(WUP Section 10)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">原子结构文件以及原子数密度</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">一般信息</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">原子能级</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">能级之间的跃迁</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mass-motion">致宽与mass motion</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">输入参数介绍</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">选项选择</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">需要注意的选项</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">计算氢时需要注意的选项</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">计算氦时需要注意的选项</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">其他需要注意的选项</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">PANDORA运行种类</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">平面平行层大气与球面大气</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id15">运行</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id16">输出</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id17">输出文件里面的坑</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id18">错误处理</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id19">迭代中的错误处理</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id20">其他错误处理</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id21">输出结果阅读理解</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#options">OPTIONS</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#tables">TABLES</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#iterates">ITERATES</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#prof">PROF</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id22">示例文件</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id23">示例一</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id24">示例二</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id25">示例三</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id26">示例四</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id27">示例六</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#h">H线部分</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caii">CaII线部分</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id28">需要留意的参数们</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#section-9">Section 9：背景谱线不透明度</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#section-18">Section 18：合成频率表</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pmerge">合并程序pmerge</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#rst">.rst文件</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#msc">.msc文件</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pop">.pop文件</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#jnr">.jnr文件</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id29">具体实施</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="pandora">
<h1>PANDORA使用记录<a class="headerlink" href="#pandora" title="此标题的永久链接">#</a></h1>
<ul class="simple">
<li><p>any words
{:toc}</p></li>
</ul>
<section id="fortran">
<h2>Fortran 编译器选择<a class="headerlink" href="#fortran" title="此标题的永久链接">#</a></h2>
<p>可以从pgfortran、ifort和pgf77中选一个。我选的是ifort；关于ifort的安装可以参照<a class="reference external" href="https://www.jianshu.com/p/c6fec68966f7">这里</a>。实际上安装的是Intel® Parallel Studio XE Cluster Edition for Linux*里面的Fortran编译器。装之前或者之后记得将这些32位的包装上：</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>apt-get<span class="w"> </span>install<span class="w"> </span>lib32z1
apt-get<span class="w"> </span>install<span class="w"> </span>libstdc++5
apt-get<span class="w"> </span>install<span class="w"> </span>lib32stdc++6
apt-get<span class="w"> </span>install<span class="w"> </span>libc6-dev-i386
apt-get<span class="w"> </span>install<span class="w"> </span>gcc-multilib
apt-get<span class="w"> </span>install<span class="w"> </span>g++-multilib
</pre></div>
</div>
<p>要不然一会PANDORA是装不上的hhh。</p>
<p>会有<code class="docutils literal notranslate"><span class="pre">Unsupported</span> <span class="pre">OS</span></code>的提示，跳过即可。
如果位置不够的话可以将其他不需要的软件包取消掉，和Fortran有关的只有500M左右的东西；Intel的Fortran数学库可以不装。</p>
<section id="license">
<h3>License过期之后<a class="headerlink" href="#license" title="此标题的永久链接">#</a></h3>
<p>Intel的学生License仅有一年，一年之后将不能使用编译器。这个时候如果还是学生的话只需要再次到intel那获取一个序列号，然后重装ifort就行了。卸载方法在<a class="reference external" href="https://software.intel.com/en-us/download/parallel-studio-xe-2020-install-guide-linux">这里</a>有。</p>
</section>
</section>
<section id="csh">
<h2>安装csh<a class="headerlink" href="#csh" title="此标题的永久链接">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">csh</span></code></p>
</section>
<section id="perl">
<h2>安装Perl<a class="headerlink" href="#perl" title="此标题的永久链接">#</a></h2>
<p>这个算是半必须的，在后面更新文件的时候作者写了个方便的perl脚本来更新，所以不装的话就得手动了。Ubuntu的具体安装方法参见<a class="reference external" href="https://blog.csdn.net/JohnwayChan/article/details/79066960">这里</a>。</p>
</section>
<section id="id1">
<h2>文件准备<a class="headerlink" href="#id1" title="此标题的永久链接">#</a></h2>
<ul class="simple">
<li><p>文件分为9个部分，其中6个是有内容的，三个是单纯用来分割的(GO部分)</p></li>
<li><p>可以将输入放在别的文件里面，用<code class="docutils literal notranslate"><span class="pre">USE</span> <span class="pre">(ATOM/MODEL/RESTART/INPUT/GENERAL)</span></code>跑到对应文件(<code class="docutils literal notranslate"><span class="pre">.atm</span></code>, <code class="docutils literal notranslate"><span class="pre">.mod</span></code>, <code class="docutils literal notranslate"><span class="pre">.res</span></code>)那里去读取；在对应文件中使用<code class="docutils literal notranslate"><span class="pre">USE</span> <span class="pre">(INPUT)</span></code>退回到主控制文件；下一次对于该辅助文件的的读取将会在该位置继续进行。如果定义了<code class="docutils literal notranslate"><span class="pre">FILE</span> <span class="pre">(</span> <span class="pre">0</span> <span class="pre">FILESPEC</span> <span class="pre">)</span></code>（wup105页），则<code class="docutils literal notranslate"><span class="pre">USE</span> <span class="pre">(GENERAL)</span></code>会去那个文件那里读。</p></li>
</ul>
<p>除了这几个部分之外，我们还有几个Group（组）：</p>
<ol class="arabic simple">
<li><p>恒星大气模型</p></li>
<li><p>原子/离子模型</p></li>
<li><p>能级/跃迁相关的重启数据</p></li>
<li><p>与运行相关的数字和控制选项</p></li>
</ol>
<p>第1、第2组数据必须提供；从0开始的运行的话第3组可以不提供；第4组基本上不用提供。</p>
<section id="id2">
<h3>格式大坑<a class="headerlink" href="#id2" title="此标题的永久链接">#</a></h3>
<p>在写<code class="docutils literal notranslate"><span class="pre">Z</span></code>, <code class="docutils literal notranslate"><span class="pre">TE</span></code>, <code class="docutils literal notranslate"><span class="pre">NH</span></code>, <code class="docutils literal notranslate"><span class="pre">NE</span></code>等比较大的表格的时候需要按如下格式写：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Z</span>  <span class="p">(</span> <span class="o">&gt;</span>
<span class="o">-</span><span class="mf">8.53000000E+05</span> <span class="o">-</span><span class="mf">6.53000000E+05</span> <span class="o">-</span><span class="mf">4.66000000E+05</span> <span class="o">-</span><span class="mf">2.25000000E+05</span>  <span class="mf">0.00000000E+00</span>
<span class="p">)</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p>不可以写成一行！虽然我也不知道为什么但是写成一行的话log文件会报类似这样的错：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="mi">2019</span><span class="o">-</span><span class="n">Jun</span><span class="o">-</span><span class="mi">20</span> <span class="mi">20</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">24</span>  <span class="c1">#                Read input, part 2              </span>
 <span class="n">Current</span> <span class="n">contents</span> <span class="n">of</span> <span class="n">the</span> <span class="n">caller</span> <span class="n">stack</span><span class="p">:</span>
   <span class="mi">1</span> <span class="n">YARTY</span>                           
   <span class="mi">2</span>  <span class="n">TRENT</span>                           
   <span class="mi">3</span>   <span class="n">TAY</span>                             
   <span class="mi">4</span>    <span class="n">BUSY</span>                            
   <span class="mi">5</span>     <span class="n">NADINE</span>                          
   <span class="mi">6</span>      <span class="n">VANILLA</span>                         
   <span class="mi">7</span>       <span class="n">MOCHA</span>                           
   <span class="mi">8</span>        <span class="n">BASIL</span>                           
   <span class="mi">9</span>         <span class="n">ARRAN</span>                           
  <span class="mi">10</span>          <span class="n">ABORT</span>                           
</pre></div>
</div>
<p>然后aaa文件的<code class="docutils literal notranslate"><span class="pre">INPUT</span> <span class="pre">NOTES</span></code>会有这样的错误提示：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">Error</span> <span class="n">reading</span> <span class="n">FLTPT</span> <span class="n">array</span><span class="p">:</span> <span class="n">Z</span>       

 <span class="n">List</span> <span class="n">of</span> <span class="n">valid</span> <span class="n">control</span> <span class="n">fields</span><span class="p">:</span>

              <span class="n">R</span>         <span class="n">r</span>         <span class="n">I</span>         <span class="n">i</span>         <span class="n">S</span>         <span class="n">s</span>         <span class="n">M</span>         <span class="n">m</span>         <span class="n">F</span>         <span class="n">f</span>
       <span class="p">)</span>       

 <span class="n">Current</span> <span class="nb">input</span> <span class="n">field</span><span class="p">:</span> <span class="s2">&quot;Z       &quot;</span>



         <span class="mi">10</span>        <span class="mi">20</span>        <span class="mi">30</span>        <span class="mi">40</span>        <span class="mi">50</span>        <span class="mi">60</span>        <span class="mi">70</span>        <span class="mi">80</span>
 <span class="o">....-....+....-....+....-....+....-....+....-....+....-....+....-....+....-....+</span>
 <span class="n">TE</span> <span class="p">(</span>  <span class="o">&gt;</span>                                                                         
   <span class="o">*</span>

 <span class="n">Unrecognizable</span> <span class="n">control</span> <span class="n">field</span><span class="o">.</span> <span class="n">See</span> <span class="nb">list</span> <span class="n">above</span><span class="o">.</span>               
</pre></div>
</div>
<p>并在<code class="docutils literal notranslate"><span class="pre">CONSTRAIN</span></code>之后停下来。</p>
</section>
<section id="wup-section-10">
<h3>元素数据输入(WUP Section 10)<a class="headerlink" href="#wup-section-10" title="此标题的永久链接">#</a></h3>
<p>需要有元素才能计算电子密度等量。程序中有一个<code class="docutils literal notranslate"><span class="pre">NMT</span></code>行（就是有多少种元素，默认为38）9列的一个表。9列的内容分别为：元素符号(M)、原子序数(atno)、相对氢的丰度(AB)，电离能(CHI)，配分方程U-I和U-II(UI, UII)，以氢为12的对数丰度(LAB)，对数丰度的默认值(DEF)，表示默认值ref的整数(k)。当然并不是所有的内容都要手动指明。</p>
<p>和默认值不一样的数据需要手动输入；如果是默认表里没有的元素需要用<code class="docutils literal notranslate"><span class="pre">NEWELE</span></code>命令：</p>
<p><code class="docutils literal notranslate"><span class="pre">NEWELE</span> <span class="pre">(</span> <span class="pre">j</span> <span class="pre">M</span> <span class="pre">atno</span> <span class="pre">AB</span> <span class="pre">CHI</span> <span class="pre">UI</span> <span class="pre">UII</span> <span class="pre">LAB</span> <span class="pre">DEF</span> <span class="pre">k</span> <span class="pre">)</span></code></p>
<p>这里的<code class="docutils literal notranslate"><span class="pre">j</span></code>代表着程序内建表的第j行，我们可以通过不同的j将表中的某一行覆盖掉。。</p>
<p>如果是更改某个已有元素的丰度，则可以用<code class="docutils literal notranslate"><span class="pre">ELEMENT</span></code> 命令：</p>
<p><code class="docutils literal notranslate"><span class="pre">ELEMENT</span> <span class="pre">(</span> <span class="pre">M</span> <span class="pre">I1</span> <span class="pre">I2</span> <span class="pre">...</span> <span class="pre">In</span> <span class="pre">)</span></code></p>
<p>其中M当然是要改变的元素符号了，而后面的I是成对出现的，第一个I指名要改变的数字名称（ATNO, AB, CHI, UI, UII, LAB），第二个I指名要改成的数字。举个例子，</p>
<p><code class="docutils literal notranslate"><span class="pre">ELEMENT</span> <span class="pre">(</span> <span class="pre">FE</span> <span class="pre">AB</span> <span class="pre">3.5E-5</span> <span class="pre">CHI</span> <span class="pre">7.87</span> <span class="pre">UI</span> <span class="pre">24</span> <span class="pre">)</span></code></p>
<p>会将铁元素的丰度改为0.000035，电离能改为7.87，配分函数U-I改为24。如果有离子的话（比如HeI和HeII）记得一起都改，要不然程序会报错。</p>
<p>在选择上，可以用<code class="docutils literal notranslate"><span class="pre">ELEMENT</span></code>的就不要用<code class="docutils literal notranslate"><span class="pre">NEWELE</span></code>了。</p>
<p>元素表可以被增减；比如<code class="docutils literal notranslate"><span class="pre">NMT</span> <span class="pre">(</span> <span class="pre">5</span> <span class="pre">)</span></code>只取元素表的前5个，<code class="docutils literal notranslate"><span class="pre">NMT</span> <span class="pre">(</span> <span class="pre">39</span> <span class="pre">)</span></code>取整个元素表并且最后一行全为0。注意<code class="docutils literal notranslate"><span class="pre">NMT</span></code>不能大于50。如果不改变元素表行数的话可以省略这个语句。<code class="docutils literal notranslate"><span class="pre">NMT</span></code>语句要在part B，<code class="docutils literal notranslate"><span class="pre">ELEMENT</span></code>和<code class="docutils literal notranslate"><span class="pre">NEWELE</span></code>要在part D。</p>
<p>如果要新加元素，建议用<code class="docutils literal notranslate"><span class="pre">NMT</span> <span class="pre">(</span> <span class="pre">39</span> <span class="pre">)</span></code>加一行，再用<code class="docutils literal notranslate"><span class="pre">ELEMENT</span></code>语句加元素。只要表里没有<code class="docutils literal notranslate"><span class="pre">ELEMENT</span></code>中的元素并且有空行，程序就会添加新的元素；否则程序会停止。</p>
<p>默认的元素为原子序数1-32, 37-40, 56加上$<span class="math notranslate nohighlight">\( \mathrm{H_2} \)</span>$。</p>
<p>在这里我们有两个丰度：AB和LAB。在计算上AB优先于LAB，即只要AB不为0，LAB就会跟据AB的值改变（不管有没有被指定）；只有当AB为0时AB才会根据LAB的值被算出来。同时如果AB小于0，则将AB和LAB都设为0。总之就是不要同时指定AB和LAB就好了。</p>
<p>参数<code class="docutils literal notranslate"><span class="pre">FABD</span></code>可以将除氢氦外所有元素的AB同时扩大FABD倍。</p>
<p>最终AB=0的元素将被排除。</p>
</section>
<section id="id3">
<h3>原子结构文件以及原子数密度<a class="headerlink" href="#id3" title="此标题的永久链接">#</a></h3>
<p>只需要提供主运行原子的原子结构文件，可以在<code class="docutils literal notranslate"><span class="pre">atom/</span></code>文件夹里面找，或者自己写。原子数密度也是需要的，而且和主运行原子不同，我们考虑多少原子就要多少原子的数密度；这个可以由从0开始的PANDORA计算得出。</p>
<section id="id4">
<h4>一般信息<a class="headerlink" href="#id4" title="此标题的永久链接">#</a></h4>
<p>原子结构文件包含：原子的能级、连续谱、能级的性质、原子能级之间的跃迁性质以及原子能级-连续谱之间的跃迁性质。</p>
<section id="id5">
<h5>原子能级<a class="headerlink" href="#id5" title="此标题的永久链接">#</a></h5>
<p>原子能级的数量为<code class="docutils literal notranslate"><span class="pre">NL</span></code>，必须大于等于2。能级的量子数$<span class="math notranslate nohighlight">\( n \)</span><span class="math notranslate nohighlight">\(和\)</span><span class="math notranslate nohighlight">\( l \)</span><span class="math notranslate nohighlight">\(在`NLPAIR`中指定（这意味着`NLPAIR`的长度为\)</span><span class="math notranslate nohighlight">\( \mathrm{NL}\times 2 \)</span><span class="math notranslate nohighlight">\(）。某能级的角量子数\)</span><span class="math notranslate nohighlight">\( l_i \)</span><span class="math notranslate nohighlight">\(可以为-1，这个时候这个能级代表着将主量子数为\)</span><span class="math notranslate nohighlight">\( n_i \)</span><span class="math notranslate nohighlight">\(的所有能级合并在一起的一个合成能级；此时\)</span><span class="math notranslate nohighlight">\( n_i \)</span><span class="math notranslate nohighlight">\(必须大于0。氢原子的默认能级就是\)</span><span class="math notranslate nohighlight">\( n_i = i, l_i = -1 \)</span><span class="math notranslate nohighlight">\(。在具体的各个原子能级文件中应该都细化了\)</span><span class="math notranslate nohighlight">\( l \)</span>$值。</p>
<p>实际运行下来的感觉是，<code class="docutils literal notranslate"><span class="pre">NLPAIR</span></code>中的数字应该只起到标示的作用，<code class="docutils literal notranslate"><span class="pre">/atom</span></code>里面的<code class="docutils literal notranslate"><span class="pre">NLPAIR</span></code>基本上都和内置的能级没有关系；实际上还是按照内置的能级来填写各个参数的。<code class="docutils literal notranslate"><span class="pre">RUNTOPOP</span></code>标明了设定能级和内置能级的对应关系，写出来的12345是内置能级名称，这个数组的位置（坑）是设定能级的名称。</p>
<p>在多重线的情况下，只需指定其中一条，然后在后面用blend line等参数分裂成几条即可：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LDL</span> <span class="mi">4</span> <span class="mi">2</span> <span class="p">(</span> <span class="mi">3</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">DDL</span> <span class="mi">4</span> <span class="mi">2</span> <span class="p">(</span> <span class="o">-</span><span class="mf">1.249</span> <span class="o">-</span><span class="mf">.0898</span> <span class="mf">0.</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">CDL</span> <span class="mi">4</span> <span class="mi">2</span> <span class="p">(</span> <span class="mf">.1111</span> <span class="mf">.3333</span> <span class="mf">.5556</span> <span class="p">)</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p>如果碰撞电离系数<code class="docutils literal notranslate"><span class="pre">CI</span></code>为默认的话，需要指定每个能级的电子数（这是啥？）<code class="docutils literal notranslate"><span class="pre">QNL</span></code>。</p>
<p><code class="docutils literal notranslate"><span class="pre">NU</span></code>指定了每个能级的能量，以频率$<span class="math notranslate nohighlight">\( 10^15 \mathrm{Hz} \)</span><span class="math notranslate nohighlight">\(作为单位。能量的0点在第一个输入的能级\)</span><span class="math notranslate nohighlight">\( \mathrm{NU}^1 \)</span>$处。类似地，<code class="docutils literal notranslate"><span class="pre">NUK</span></code>是联系普的能量。</p>
<p>其他需要的参数为：<code class="docutils literal notranslate"><span class="pre">P</span></code>，统计权重；<code class="docutils literal notranslate"><span class="pre">CP</span></code>：光致电离截面；<code class="docutils literal notranslate"><span class="pre">ELSYM</span></code>，元素符号；以及<code class="docutils literal notranslate"><span class="pre">IONSTAGE</span></code>，目标原子电离能级（比如目标是HeI那就是1）。</p>
</section>
<section id="id6">
<h5>能级之间的跃迁<a class="headerlink" href="#id6" title="此标题的永久链接">#</a></h5>
</section>
</section>
</section>
<section id="mass-motion">
<h3>致宽与mass motion<a class="headerlink" href="#mass-motion" title="此标题的永久链接">#</a></h3>
</section>
</section>
<section id="id7">
<h2>输入参数介绍<a class="headerlink" href="#id7" title="此标题的永久链接">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">XI</span></code>：输出光谱的数据点位置，数值代表距离线心的频率。这玩意必须从0开始，单调递增，以此表示半个轮廓的采样。如果不是默认的话它的长度必须由<code class="docutils literal notranslate"><span class="pre">KS</span></code>指定。</p>
</section>
<section id="id8">
<h2>选项选择<a class="headerlink" href="#id8" title="此标题的永久链接">#</a></h2>
<p>这里先仅介绍<code class="docutils literal notranslate"><span class="pre">CALCULATION</span></code>部分的选项、它们的默认值以及建议开启的情况。</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>Name</p></th>
<th class="head text-center"><p>default</p></th>
<th class="head text-center"><p>Description</p></th>
<th class="head text-center"><p>Comment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">346</span> <span class="pre">ALLCICE</span></code></p></td>
<td class="text-center"><p>*on</p></td>
<td class="text-center"><p>Compute complete set of CI and CE samples.</p></td>
<td class="text-center"><p>由程序控制吧；有的时候没有出现</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">219</span> <span class="pre">AMDIFF</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Include ambipolar diffusion.</p></td>
<td class="text-center"><p>在计算氢/氦时建议开启</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">272</span> <span class="pre">AMDN1</span></code></p></td>
<td class="text-center"><p>*on</p></td>
<td class="text-center"><p>Use “special N1-calculation” for ambipolar diffusion, (used only if AMDIFF=ON) (NOT to be turned off).</p></td>
<td class="text-center"><p>只有当<code class="docutils literal notranslate"><span class="pre">AMDIFF</span></code>开启时才有用，永不关闭</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">303</span> <span class="pre">AVCON</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Calculate the average of the continuum intensities I/Hz.</p></td>
<td class="text-center"><p>一般关闭</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">307</span> <span class="pre">AVELOP</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Use Averaged Line Opacity.</p></td>
<td class="text-center"><p>一般关闭。</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">245</span> <span class="pre">BDCALC</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Departure Coefficients calculated from all level equations, rather than from the continuum equation.</p></td>
<td class="text-center"><p>在计算氢/氦时建议开启。</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">161</span> <span class="pre">BEDIT</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Edit calculated departure coefficients, to prevent negative CSF values.</p></td>
<td class="text-center"><p>一般关闭。</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">271</span> <span class="pre">BSMOOTH</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Do sequential smoothing of departure coefficients.</p></td>
<td class="text-center"><p>在计算氢时建议开启。</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">133</span> <span class="pre">CALCOOL</span> </code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Calculate net cooling rates.</p></td>
<td class="text-center"><p>我认为对计算结果无影响。有需要看数据时建议开启。</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">231</span> <span class="pre">CALHEAT</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Calculate net heating rates.</p></td>
<td class="text-center"><p>我认为对计算结果无影响。有需要看数据时建议开启。</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">328</span> <span class="pre">CEFACTS</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Use and update CE-enhancement factors when possible and needed.</p></td>
<td class="text-center"><p>一般关闭。</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">330</span> <span class="pre">CHEXLO</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Use lower-level charge exchange.</p></td>
<td class="text-center"><p>一般关闭。</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">333</span> <span class="pre">CHEXLOL</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Use LTE hydrogen number densities in lower-level charge exchange calculations.</p></td>
<td class="text-center"><p>一般关闭。</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">331</span> <span class="pre">CHEXUP</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Use upper-level charge exchange.</p></td>
<td class="text-center"><p>一般关闭。</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">339</span> <span class="pre">CLNORM</span></code></p></td>
<td class="text-center"><p>*on</p></td>
<td class="text-center"><p>Compute H Lyman lines normalizing factors (see also option ULNORM).</p></td>
<td class="text-center"><p>默认开启。</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">305</span> <span class="pre">COCLIPSE</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Do Continuum Eclipse calculations for CO-lines wavelengths.</p></td>
<td class="text-center"><p>一般关闭。</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">84</span> <span class="pre">COLTEMP</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Calculate Color Temperatures.</p></td>
<td class="text-center"><p>一般关闭。</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">80</span> <span class="pre">CONFLUX</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Calculate Continuum Flux.</p></td>
<td class="text-center"><p>有需要时开启。</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">225</span> <span class="pre">COOLCO</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Calculate CO-lines cooling rate.</p></td>
<td class="text-center"><p>一般关闭。</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">194</span> <span class="pre">COOLCOM</span></code></p></td>
<td class="text-center"><p>*on</p></td>
<td class="text-center"><p>Calculate Composite Lines cooling rate (only if only one band).</p></td>
<td class="text-center"><p>默认开启</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">140</span> <span class="pre">COOLINT</span></code></p></td>
<td class="text-center"><p>*on</p></td>
<td class="text-center"><p>Calculate integrated net cooling and heating rates.</p></td>
<td class="text-center"><p>默认开启</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">196</span> <span class="pre">COOLXRAY</span></code></p></td>
<td class="text-center"><p>*on</p></td>
<td class="text-center"><p>Calculate X-rays cooling rate.</p></td>
<td class="text-center"><p>默认开启</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">184</span> <span class="pre">CPSW</span></code></p></td>
<td class="text-center"><p>*on</p></td>
<td class="text-center"><p>Adjust total Hydrogen density to give constant pressure, (used only if HSE=OFF).</p></td>
<td class="text-center"><p>默认开启</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">46</span> <span class="pre">CSF</span></code></p></td>
<td class="text-center"><p>*on</p></td>
<td class="text-center"><p>Use computed Continuum Source Function when calculating Line Source function.</p></td>
<td class="text-center"><p>默认开启</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">166</span> <span class="pre">CSFB</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>In line source function calculation: set BC = min(CSF, B), (if =OFF then BC = CSF); (used only if CSF=ON).</p></td>
<td class="text-center"><p>一般关闭</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">14</span> <span class="pre">CSWITCH</span></code></p></td>
<td class="text-center"><p>*OFF</p></td>
<td class="text-center"><p>Use level-1 TR in calculation of Stimulated Emission factors for BC; (if =OFF then use TE).</p></td>
<td class="text-center"><p>一般关闭</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">233</span> <span class="pre">DOION</span></code></p></td>
<td class="text-center"><p>*on</p></td>
<td class="text-center"><p>Do all the normal calculations related to the ion-of-the-run.</p></td>
<td class="text-center"><p>一般开启</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">266</span> <span class="pre">DSMOOTH</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Do sequential smoothing in diffusion calculations.</p></td>
<td class="text-center"><p>与diffsuion有关，在计算氢/氦时开启</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">212</span> <span class="pre">DUSTEMP</span></code></p></td>
<td class="text-center"><p>*on</p></td>
<td class="text-center"><p>Calculate new Type-2 Dust Temperature table; (used only if DUSTYPE=ON).</p></td>
<td class="text-center"><p>默认开启</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">99</span> <span class="pre">DUSTYPE</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Use Type-2 method to calculate dust opacity.</p></td>
<td class="text-center"><p>一般关闭</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">6</span> <span class="pre">ECLIPSE</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Calculate Continuum Eclipse Intensity (for negative “Additional Wavelengths” only).</p></td>
<td class="text-center"><p>不明，可能需要和WAVES配合使用；一般关闭</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">208</span> <span class="pre">EMERBACK</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Calculate Intensity and Flux emerging from back face of finite atmosphere.</p></td>
<td class="text-center"><p>对氦线可能有用，不过与外部光源不一样；demo中没有开启</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">55</span> <span class="pre">EMERINT</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Calculate emergent continuous intensities.</p></td>
<td class="text-center"><p>氢氦时开启，应该对计算贡献函数有用</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">38</span> <span class="pre">ENHANCE</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Use R**2 enhancement factor in the calculation of emergent intensities; (will be switched OFF if SPHERE=ON).</p></td>
<td class="text-center"><p>一般关闭</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">71</span> <span class="pre">ENL</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Edit negative values out of EP1, by interpolation using neighboring values.</p></td>
<td class="text-center"><p>一般关闭</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">72</span> <span class="pre">ENL2</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Edit negative values out of EP1, by shifting the whole set of values.</p></td>
<td class="text-center"><p>一般关闭</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">122</span> <span class="pre">EPSNEDC</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Edit out negative values of “Lyman” EP1, when the “CHAIN” method (i.e. METEP=3) is used.</p></td>
<td class="text-center"><p>一般关闭</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">185</span> <span class="pre">EPSW</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Replace any Source Function Epsilons less than -0.9999 by -0.9999.</p></td>
<td class="text-center"><p>一般关闭</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">169</span> <span class="pre">EXPAND</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>This run is for an expanding atmosphere.</p></td>
<td class="text-center"><p>重要；大气有运动的时候需要打开</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">178</span> <span class="pre">FELE</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Calculate rates due to fast electrons.</p></td>
<td class="text-center"><p>存疑；一般关闭</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">177</span> <span class="pre">FELEC</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Use results of fast electrons calculation.</p></td>
<td class="text-center"><p>存疑；一般关闭</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">49</span> <span class="pre">FINITE</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>In this calculation the medium is of finite extent.</p></td>
<td class="text-center"><p>一般关闭</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">335</span> <span class="pre">FLWBROAD</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Compute flow-broadened profiles.</p></td>
<td class="text-center"><p>一般关闭</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">60</span> <span class="pre">GDS</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Use geometrical dilution terms; (will be switched OFF if SPHERE=ON).</p></td>
<td class="text-center"><p>一般关闭</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">244</span> <span class="pre">GNVCALC</span></code></p></td>
<td class="text-center"><p>*on</p></td>
<td class="text-center"><p>Determine the diffusion term GNV-1 from the non-local N-1 calculation.</p></td>
<td class="text-center"><p>默认开启</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">332</span> <span class="pre">GTNSMTH</span></code></p></td>
<td class="text-center"><p>*on</p></td>
<td class="text-center"><p>Smooth STIM when calculating GTN(u,l).</p></td>
<td class="text-center"><p>默认开启</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">275</span> <span class="pre">GTNSTIM</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Use departure coefficients, instead of number densities, in STIM for GTN(u,l).</p></td>
<td class="text-center"><p>一般关闭</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">273</span> <span class="pre">HBROAD</span></code></p></td>
<td class="text-center"><p>*on</p></td>
<td class="text-center"><p>In a Hydrogen run, include collisional broadening for transitions above level 5.</p></td>
<td class="text-center"><p>默认开启</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">281</span> <span class="pre">HEABD</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Calculate depth dependence of helium abundance (used only if AMDIFF=ON).</p></td>
<td class="text-center"><p>一般关闭，但可能有用</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">230</span> <span class="pre">HENORM</span></code></p></td>
<td class="text-center"><p>*on</p></td>
<td class="text-center"><p>Renormalize helium number densities in the diffusion calculations.</p></td>
<td class="text-center"><p>存疑；默认即可？</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">68</span> <span class="pre">HMS</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Calculate a non-LTE H- source function.</p></td>
<td class="text-center"><p>氢时可开启</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">16</span> <span class="pre">HSE</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Calculate hydrostatic equilibrium; (will be switched OFF if SPHERE=ON).</p></td>
<td class="text-center"><p>氢时可开启</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">270</span> <span class="pre">HSEV</span></code></p></td>
<td class="text-center"><p>*on</p></td>
<td class="text-center"><p>Include expansion velocity in the hydrostatic equilibrium equation.</p></td>
<td class="text-center"><p>默认开启</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">61</span> <span class="pre">ILRT</span></code></p></td>
<td class="text-center"><p>*on</p></td>
<td class="text-center"><p>Calculate Incident Line Radiation term, (used only if INCIDNT=ON).</p></td>
<td class="text-center"><p>默认开启</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">78</span> <span class="pre">INBED</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Edit negative values out of initial values of BD-ratios, (used only if RHOFUDGE=OFF).</p></td>
<td class="text-center"><p>一般关闭</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">51</span> <span class="pre">INCIDNT</span></code></p></td>
<td class="text-center"><p>*OFF</p></td>
<td class="text-center"><p>The external radiation field is incident upon the back face of the finite medium; (unless INCIFRONT=ON).</p></td>
<td class="text-center"><p>加外部光源的时候有用，一般和INCIFRNT一起</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">141</span> <span class="pre">INCIFRNT</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Radiation incident upon the front face of the medium, finite or semi-infinite (used only if INCIDNT=ON).</p></td>
<td class="text-center"><p>加外部光源的时候有用</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">312</span> <span class="pre">IRHWED</span></code></p></td>
<td class="text-center"><p>*on</p></td>
<td class="text-center"><p>Edit input values of RHOWT.</p></td>
<td class="text-center"><p>默认开启</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">237</span> <span class="pre">JBDNC</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Bypass the comparative calculation of b-ratios that are not used.</p></td>
<td class="text-center"><p>一般关闭</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">9</span> <span class="pre">LIGHT</span></code></p></td>
<td class="text-center"><p>*on</p></td>
<td class="text-center"><p>Calculate Line spectra.</p></td>
<td class="text-center"><p>一般开启</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">313</span> <span class="pre">LINECOMP</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Compare results from line source function and composite line calculations (see also LINECDMP).</p></td>
<td class="text-center"><p>一般关闭</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">33</span> <span class="pre">LTE</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Calculate LTE line intensity and flux profiles.</p></td>
<td class="text-center"><p>一般关闭；可能在计算光球层线的时候有用？</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">13</span> <span class="pre">LYMAN</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Calculate Level-N-to-Continuum (“Lyman”) transfer.</p></td>
<td class="text-center"><p>存疑；氢时可开启？</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">54</span> <span class="pre">MONOTAU</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Force the calculated TAU values to increase monotonically.</p></td>
<td class="text-center"><p>一般关闭</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">306</span> <span class="pre">NEDIT</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Edit number densities (for positive source functions).</p></td>
<td class="text-center"><p>一般关闭</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">56</span> <span class="pre">NESWICH</span></code></p></td>
<td class="text-center"><p>*on</p></td>
<td class="text-center"><p>Compute NE in detail, (if OFF then set NE = NP).</p></td>
<td class="text-center"><p>一般开启</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">35</span> <span class="pre">NHADJ</span></code></p></td>
<td class="text-center"><p>*on</p></td>
<td class="text-center"><p>Adjust recomputed total hydrogen density so that TAU5000 = 1 at Z = 0, (used only if HSE=ON).</p></td>
<td class="text-center"><p>默认开启；重要，确定了Z与$<span class="math notranslate nohighlight">\(\tau\)</span>$的关系</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">319</span> <span class="pre">NRSMOOTH</span></code></p></td>
<td class="text-center"><p>*on</p></td>
<td class="text-center"><p>Smooth the nl/n1 ratios in the diffusion calculations.</p></td>
<td class="text-center"><p>默认开启</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">262</span> <span class="pre">OPANEG</span></code></p></td>
<td class="text-center"><p>*on</p></td>
<td class="text-center"><p>Edit negative line opacity only to keep total opacity positive.</p></td>
<td class="text-center"><p>默认开启</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">344</span> <span class="pre">OPTHINL</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Use the optically-thin-limit approximation.</p></td>
<td class="text-center"><p>一般关闭</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">135</span> <span class="pre">ORT</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>The internal radiation travels in the outward direction only.</p></td>
<td class="text-center"><p>一般关闭</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">165</span> <span class="pre">PARTVAR</span></code></p></td>
<td class="text-center"><p>*on</p></td>
<td class="text-center"><p>Let Partition Functions vary with depth.</p></td>
<td class="text-center"><p>一般开启</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">PHASE2</span></code></p></td>
<td class="text-center"><p>*on</p></td>
<td class="text-center"><p>Spectrum calculations, and spectrum summary analyses.</p></td>
<td class="text-center"><p>一般开启</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">158</span> <span class="pre">POPBSW</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Set higher departure coefficients of population ions equal to highest computed non-LTE values.</p></td>
<td class="text-center"><p>一般关闭</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">337</span> <span class="pre">PRDMETH</span></code></p></td>
<td class="text-center"><p>*on</p></td>
<td class="text-center"><p>Use the Hubeny-Lites, instead of the Kneer-Heasley, formulation for PRD.</p></td>
<td class="text-center"><p>一般开启</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">79</span> <span class="pre">PTN</span></code></p></td>
<td class="text-center"><p>*on</p></td>
<td class="text-center"><p>Edit negative values out of integrands used to compute TAU.</p></td>
<td class="text-center"><p>一般开启</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">168</span> <span class="pre">QSFEDIT</span></code></p></td>
<td class="text-center"><p>*on</p></td>
<td class="text-center"><p>Edit QSF (i.e. P.R.D. modified source function).</p></td>
<td class="text-center"><p>一般开启</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">50</span> <span class="pre">REFLECT</span></code></p></td>
<td class="text-center"><p>*OFF</p></td>
<td class="text-center"><p>The finite medium is symmetric about the last specified depth, (used only if FINITE=ON).</p></td>
<td class="text-center"><p>一般关闭</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">150</span> <span class="pre">RHEDIT</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Edit calculated net radiative bracket.</p></td>
<td class="text-center"><p>氢氦时开启</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">106</span> <span class="pre">RHOFUDGE</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Fudge RHO values as necessary, to obtain acceptable values from the BD-ratio calculation.</p></td>
<td class="text-center"><p>一般关闭</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">204</span> <span class="pre">RHOWOPT</span></code></p></td>
<td class="text-center"><p>*on</p></td>
<td class="text-center"><p>Use “Artificial TAU” in RHO/W calculation.</p></td>
<td class="text-center"><p>默认开启</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">334</span> <span class="pre">RKINCR</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Enhance RK artificially (factors RKMULT).</p></td>
<td class="text-center"><p>一般关闭</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">147</span> <span class="pre">RSMOOTH</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Do sequential smoothing of RHO values.</p></td>
<td class="text-center"><p>氢氦时开启</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">62</span> <span class="pre">RSQUARE</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Let the Dilution Factor vary with depth.</p></td>
<td class="text-center"><p>一般关闭</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">263</span> <span class="pre">SDIRECT</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Replace negative line source function values in “DIRECT” calculations by interpolated values.</p></td>
<td class="text-center"><p>一般关闭</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">149</span> <span class="pre">SEDIT</span></code></p></td>
<td class="text-center"><p>*on</p></td>
<td class="text-center"><p>Edit calculated line source function.</p></td>
<td class="text-center"><p>默认开启</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">145</span> <span class="pre">SEDITIF</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Remove negatives from frequency-dependent line source functions used for intensity and flux profiles.</p></td>
<td class="text-center"><p>默认关闭</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">83</span> <span class="pre">SLYR</span></code></p></td>
<td class="text-center"><p>*on</p></td>
<td class="text-center"><p>Smooth out the computed “Lyman” RK1 values.</p></td>
<td class="text-center"><p>氢氦时关闭</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">172</span> <span class="pre">SNUSHFT</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Apply frequency shift to P.R.D. Snu used in emergent line profile calculation.</p></td>
<td class="text-center"><p>默认关闭</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">31</span> <span class="pre">SPHERE</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Use spherical coordinates for source function calculations.</p></td>
<td class="text-center"><p>重要；控制模型几何性质</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">156</span> <span class="pre">SPHETAU</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Compute TAU(ray) by quadratic integration, (if =OFF then use trapezoidal rule); (used only if SPHERE=ON).</p></td>
<td class="text-center"><p>默认关闭</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">8</span> <span class="pre">SPHOUT</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Use spherical coordinates to calculate Line and Continuum fluxes; (will be switched ON if SPHERE=ON).</p></td>
<td class="text-center"><p>会随着SPHERE开关，不用自己控制</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">310</span> <span class="pre">SSMOOTH</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Do sequential smoothing for S-from-number densities.</p></td>
<td class="text-center"><p>存疑；多数时候关闭？</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">304</span> <span class="pre">STKWATT</span></code></p></td>
<td class="text-center"><p>*on</p></td>
<td class="text-center"><p>Attenuate Hydrogen Stark components outside the Doppler core at each depth.</p></td>
<td class="text-center"><p>存疑；默认开启</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">163</span> <span class="pre">TANG</span></code></p></td>
<td class="text-center"><p>*on</p></td>
<td class="text-center"><p>Include the ray tangent to each depth in angle integrations for spherical coordinates, (used only if NTAN=1).</p></td>
<td class="text-center"><p>默认开启</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">299</span> <span class="pre">TRUECONT</span></code></p></td>
<td class="text-center"><p>*on</p></td>
<td class="text-center"><p>Compute line-free continuum as needed for exhibiting residual line profiles.</p></td>
<td class="text-center"><p>默认开启</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">340</span> <span class="pre">ULNORM</span></code></p></td>
<td class="text-center"><p>*on</p></td>
<td class="text-center"><p>Use H Lyman lines normalizing factors (see also option CLNORM).</p></td>
<td class="text-center"><p>默认开启</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">154</span> <span class="pre">USENCJ</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Compute Jnu directly, rather than from source function.</p></td>
<td class="text-center"><p>默认关闭</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">53</span> <span class="pre">USETRIN</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Use the specified input values of TR to calculate RK and RL.</p></td>
<td class="text-center"><p>取决于具体情况；一般关闭</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">321</span> <span class="pre">USETSM</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Eliminate TAU less than TSM from emergent intensity and from continuum JNU calculations.</p></td>
<td class="text-center"><p>一般关闭</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">221</span> <span class="pre">VELGRAD</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Include velocity gradient terms in statistical equilibrium calculations.</p></td>
<td class="text-center"><p>一般关闭</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">265</span> <span class="pre">VELS</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Use calculated diffusion velocity in source function calculations.</p></td>
<td class="text-center"><p>一般关闭</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">214</span> <span class="pre">VESCAPE</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Use Voigt expression for the escape probability.</p></td>
<td class="text-center"><p>一般关闭</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">173</span> <span class="pre">VSWITCH</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>Use two broadening velocities, (if =OFF then use a single broadening velocity).</p></td>
<td class="text-center"><p>一般关闭</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">124</span> <span class="pre">WATESTE</span></code></p></td>
<td class="text-center"><p>*on</p></td>
<td class="text-center"><p>Use logarithmic style of weighting for “Lyman” EP1,EP2.</p></td>
<td class="text-center"><p>默认打开</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">123</span> <span class="pre">WATESTR</span></code></p></td>
<td class="text-center"><p>*on</p></td>
<td class="text-center"><p>Use logarithmic style of weighting for RHO.</p></td>
<td class="text-center"><p>默认打开</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">326</span> <span class="pre">ZCOMP</span></code></p></td>
<td class="text-center"><p>*off</p></td>
<td class="text-center"><p>When mass is prescribed, adjust Z so that computed mass matches input mass table.</p></td>
<td class="text-center"><p>一般关闭</p></td>
</tr>
</tbody>
</table>
</div>
<section id="id9">
<h3>需要注意的选项<a class="headerlink" href="#id9" title="此标题的永久链接">#</a></h3>
<section id="id10">
<h4>计算氢时需要注意的选项<a class="headerlink" href="#id10" title="此标题的永久链接">#</a></h4>
<p>开：<code class="docutils literal notranslate"><span class="pre">AMDIFF,</span> <span class="pre">BDCALC,</span> <span class="pre">BSMOOTH,</span> <span class="pre">DSMOOTH,</span> <span class="pre">EMERINT,</span> <span class="pre">HMS,</span> <span class="pre">HSE</span> <span class="pre">(SPHERE打开时关闭),</span> <span class="pre">RHEDIT,</span> <span class="pre">RSMOOTH</span></code></p>
<p>关：<code class="docutils literal notranslate"><span class="pre">SLYR</span></code></p>
<p>打开<code class="docutils literal notranslate"><span class="pre">AMDIFF,</span> <span class="pre">HSE</span></code>时可能需要指定其他参数，否则会报错；<code class="docutils literal notranslate"><span class="pre">BDCALC,</span> <span class="pre">EMERINT,</span> <span class="pre">RHEDIT</span></code>打开之后谱线形状不错；所有带<code class="docutils literal notranslate"><span class="pre">SMOOTH</span></code>的参数打开之后会报错。</p>
</section>
<section id="id11">
<h4>计算氦时需要注意的选项<a class="headerlink" href="#id11" title="此标题的永久链接">#</a></h4>
<p>开：<code class="docutils literal notranslate"><span class="pre">AMDIFF,</span> <span class="pre">BDCALC,</span> <span class="pre">DSMOOTH,</span> <span class="pre">EMERINT,</span> <span class="pre">RHEDIT,</span> <span class="pre">RSMOOTH</span></code></p>
<p>关：<code class="docutils literal notranslate"><span class="pre">SLYR</span></code></p>
<p>实验证明球面下打开以及关闭上述选项对He 10830线没有影响。</p>
</section>
<section id="id12">
<h4>其他需要注意的选项<a class="headerlink" href="#id12" title="此标题的永久链接">#</a></h4>
<p>CONFLUX：有需要时开启。
EXPAND：大气速度
INCIDNT, INCIFRNT：外部光源
SPHERE：平面平行层或球面
RHEDIT：打开它的话需要指定另外的变量，暂不知道</p>
</section>
</section>
</section>
<section id="id13">
<h2>PANDORA运行种类<a class="headerlink" href="#id13" title="此标题的永久链接">#</a></h2>
<ol class="arabic simple">
<li><p>氢的占据数更新</p></li>
<li><p>除了氢外的其他占据数更新</p></li>
<li><p>一般运行（应该是输出谱线的）</p></li>
<li><p>无离子运行</p></li>
<li><p>仅连续谱运行</p></li>
<li><p>仅输入运行</p></li>
</ol>
<p>第1、2和第3种的区别在于，在计算谱线和连续谱吸收的时候，我们需要各个元素原子(H, HeI, HeII, CI, SiI, AlI, MgI, FeI, NaI, CaI, OI)以位置/深度为自变量的数密度以及偏离系数。这两者可以为默认的LTE/LTE计算出来的值或者是输入量。而在每次运行结束后，程序会提供对应本次运行主元素（比如SiI）的新的数密度以及偏离系数，而它们可以在下次中用作输入参数。所以当<code class="docutils literal notranslate"><span class="pre">POPUP</span></code>打开时，PANDORA会将这些结果写到restart文件里面，这对应一次更新运行；而当<code class="docutils literal notranslate"><span class="pre">POPUP</span></code>关闭时则为一般运行。这些数据可以通过<code class="docutils literal notranslate"><span class="pre">SILPRNT</span></code>打印出来。参数<code class="docutils literal notranslate"><span class="pre">RUNTOPOP</span></code>比较重要，它应该指定了用哪些参数。</p>
<p>第1种(?)无离子运行意味着PANDORA只将氢作为运行对象。这个时候会重新计算<code class="docutils literal notranslate"><span class="pre">Z</span></code>（几何深度）、<code class="docutils literal notranslate"><span class="pre">NH</span></code>（总的氢原子数密度）、<code class="docutils literal notranslate"><span class="pre">NE</span></code>（电子数密度）等；这些基本上是之后的运行所需要的。其他种类的运行并不会重新计算这些东西。</p>
<p>第5种仅连续谱运行和实际情况相去甚远。第4种运行做的事情比第5种多，但是性质类似。</p>
<p>第6种单纯检查输入参数是否足够以及正确。检查完，输出Phase0部分，就停下了。</p>
<p>有几个参数控制程序为哪一种运行：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">JSTCN</span></code>控制是否进行“连续谱运行”：&gt;0为连续谱运行，=0不是；具体数字可以控制输入参数，请参阅wup的86页。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">JSTIN</span></code>控制是否进行“仅输入运行”：&gt;0为仅输入运行，=0不是</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NOION</span></code>控制是否进行“无离子运行”：=1为无离子运行，=0不是</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">JSTCN</span></code>与<code class="docutils literal notranslate"><span class="pre">JSTIN</span></code>、<code class="docutils literal notranslate"><span class="pre">JSTCN</span></code>与<code class="docutils literal notranslate"><span class="pre">NOION</span></code>不可同时大于0</p></li>
</ul>
<p>另外的运行选项：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ISCRS</span></code>：如果打开则占用很多内存</p></li>
</ul>
<p>这里提到的所有选项都为数字(<code class="docutils literal notranslate"><span class="pre">JSTCN</span></code>, <code class="docutils literal notranslate"><span class="pre">JSTIN</span></code>, <code class="docutils literal notranslate"><span class="pre">NOION</span></code>, <code class="docutils literal notranslate"><span class="pre">ISCRS</span></code>)，后边三个也可以分别用<code class="docutils literal notranslate"><span class="pre">JSTIN</span></code>, <code class="docutils literal notranslate"><span class="pre">DOION</span></code>, <code class="docutils literal notranslate"><span class="pre">ISCRS</span></code>选项来控制。</p>
</section>
<section id="id14">
<h2>平面平行层大气与球面大气<a class="headerlink" href="#id14" title="此标题的永久链接">#</a></h2>
<p>如果用球面大气的话需要打开<code class="docutils literal notranslate"><span class="pre">DO</span> <span class="pre">(</span> <span class="pre">SPHERE</span> <span class="pre">)</span></code>，并且需要指定<code class="docutils literal notranslate"><span class="pre">R1N</span></code>.暂时不知道为什么要加上R1N.</p>
</section>
<section id="id15">
<h2>运行<a class="headerlink" href="#id15" title="此标题的永久链接">#</a></h2>
<p>把所有文件准备好之后，在同一个目录下运行<code class="docutils literal notranslate"><span class="pre">bin/pandora</span></code>就可以了；当然后面要加上一些参数，比如：</p>
<p><code class="docutils literal notranslate"><span class="pre">bin/pandora</span> <span class="pre">[options]</span> <span class="pre">&lt;atm-model-name&gt;</span> <span class="pre">&lt;atom-name&gt;</span> <span class="pre">&lt;atom-n-levels&gt;</span> <span class="pre">&lt;run-id&gt;</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="o">-</span><span class="n">inp</span>   <span class="o">&lt;</span><span class="nb">input</span><span class="o">-</span><span class="nb">dir</span><span class="o">&gt;</span><span class="p">,</span>       <span class="n">def</span><span class="o">.</span><span class="p">:</span> <span class="o">.</span>
    <span class="o">-</span><span class="n">out</span>   <span class="o">&lt;</span><span class="n">output</span><span class="o">-</span><span class="nb">dir</span><span class="o">&gt;</span><span class="p">,</span>      <span class="n">def</span><span class="o">.</span><span class="p">:</span> <span class="o">.</span>
    <span class="o">-</span><span class="n">io</span>    <span class="o">&lt;</span><span class="nb">dir</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">equivalent</span> <span class="n">to</span> <span class="o">-</span><span class="n">inp</span> <span class="o">&lt;</span><span class="nb">dir</span><span class="o">&gt;</span> <span class="o">-</span><span class="n">out</span> <span class="o">&lt;</span><span class="nb">dir</span><span class="o">&gt;</span>
    <span class="o">-</span><span class="n">stats</span> <span class="o">&lt;</span><span class="n">stats</span><span class="o">-</span><span class="nb">dir</span><span class="o">&gt;</span><span class="p">,</span>       <span class="n">def</span><span class="o">.</span><span class="p">:</span> <span class="n">stats</span>
    <span class="o">-</span><span class="n">atoms</span> <span class="o">&lt;</span><span class="n">atoms</span><span class="o">-</span><span class="nb">dir</span><span class="o">&gt;</span><span class="p">,</span>       <span class="n">def</span><span class="o">.</span><span class="p">:</span> <span class="n">atoms</span>
    <span class="o">-</span><span class="n">opac</span>  <span class="o">&lt;</span><span class="n">opacities</span><span class="o">-</span><span class="nb">dir</span><span class="o">&gt;</span><span class="p">,</span>   <span class="n">def</span><span class="o">.</span><span class="p">:</span> <span class="n">opacities</span>
    <span class="o">-</span><span class="nb">bin</span>   <span class="o">&lt;</span><span class="n">executable</span><span class="o">-</span><span class="nb">dir</span><span class="o">&gt;</span><span class="p">,</span>  <span class="n">def</span><span class="o">.</span><span class="p">:</span> <span class="nb">bin</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">bin/pandora</span> <span class="pre">-io</span> <span class="pre">2/</span> <span class="pre">-atoms</span> <span class="pre">2/</span> <span class="pre">demo2</span> <span class="pre">h</span>&#160;&#160;&#160; <span class="pre">l3</span> <span class="pre">001</span> <span class="pre">&gt;&amp;</span> <span class="pre">2/demo2.log</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">-io</span></code>指定文件所在的位置，<code class="docutils literal notranslate"><span class="pre">-atmos</span></code>指定原子模型文件所在的位置。后面接着的是主控制文件的名称(<code class="docutils literal notranslate"><span class="pre">demo1</span></code>)，pandora会在<code class="docutils literal notranslate"><span class="pre">-io</span></code>文件夹里面寻找<code class="docutils literal notranslate"><span class="pre">demo1.dat</span></code>。之后是本次运行的原子名称，虽然这里没有(<code class="docutils literal notranslate"><span class="pre">none</span></code>)但是一般可以是氢(<code class="docutils literal notranslate"><span class="pre">h</span></code>)、氦原子(<code class="docutils literal notranslate"><span class="pre">he1</span></code>)、硅(<code class="docutils literal notranslate"><span class="pre">si</span></code>)等；为了避免理解偏差我建议通通写明运行原子名称。再后面是本次运行的原子的模型，为<code class="docutils literal notranslate"><span class="pre">l</span></code>加上能级数，如<code class="docutils literal notranslate"><span class="pre">l15</span></code>、<code class="docutils literal notranslate"><span class="pre">l13</span></code>等等，具体可查阅<code class="docutils literal notranslate"><span class="pre">atoms/</span></code>里面的文件名；要注意原子结构文件名是<code class="docutils literal notranslate"><span class="pre">&lt;atom-name&gt;&lt;atom-n-levels&gt;</span></code>，在写命令的时候要对应。再接着是本次运行的名字，如果不想每次重新运行都删文件的话改这个数字（或者字母）就可以了。最后将运行情况输出到指定的<code class="docutils literal notranslate"><span class="pre">.log</span></code>文件里。</p>
<p>这部分wup里面没有明确说出来，但是我觉得应该是这样的。</p>
<p>另外在准备文件里面也要写明本次运行的原子名称：比如<code class="docutils literal notranslate"><span class="pre">NAME</span> <span class="pre">(</span> <span class="pre">HYDROGEN</span> <span class="pre">)</span></code>这样。</p>
</section>
<section id="id16">
<h2>输出<a class="headerlink" href="#id16" title="此标题的永久链接">#</a></h2>
<p>主要的输出结果在<code class="docutils literal notranslate"><span class="pre">.aaa</span></code>文件里面。但是它太大了（如果输出多的话），所以一般会有<code class="docutils literal notranslate"><span class="pre">.aix</span></code>文件作为它的目录。只要是目录里面有的部分都可以用<code class="docutils literal notranslate"><span class="pre">bin/extract</span> <span class="pre">'XXX'</span> <span class="pre">SPh.aaa.001</span> <span class="pre">SPh.out.001</span></code>来提取，使得世界更美好。</p>
<ul class="simple">
<li><p>输出提取</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">bin/extract</span> <span class="pre">'LINE</span> <span class="pre">(5/1)'</span> <span class="pre">SPh.aaa.001</span> <span class="pre">SPh.line_5-1.out.001</span></code></p>
<p>PANDORA有自带的输出部分提取程序（作者也知道输出文件巨长…），看了上面的例子就懂了。提取的部分名称可以到<code class="docutils literal notranslate"><span class="pre">.aix</span></code>文件里面去看，它相当于一个目录。<code class="docutils literal notranslate"><span class="pre">.aix</span></code>文件的第一列是一个各个部分的唯一标识码（如<code class="docutils literal notranslate"><span class="pre">PSN144705</span></code>），可以通过这个码来提取各个部分。</p>
<section id="id17">
<h3>输出文件里面的坑<a class="headerlink" href="#id17" title="此标题的永久链接">#</a></h3>
<p>这里会记录得比较散。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LINE</span> <span class="pre">(X/Y)</span></code>中的<code class="docutils literal notranslate"><span class="pre">KPC</span></code>和<code class="docutils literal notranslate"><span class="pre">KL</span></code>（还有其他的吸收系数）都是已经乘上了密度的</p></li>
</ul>
</section>
</section>
<section id="id18">
<h2>错误处理<a class="headerlink" href="#id18" title="此标题的永久链接">#</a></h2>
<p>我不会告诉你我是突然间顿悟这个东西的…</p>
<p>还记得在格式大坑里面我提到的log文件中报的错误么？从1到10有一堆不明所以的名字。那其实是程序运行中报错的函数以及它的上级函数的名字。要定位aaa中的错误位置只需要在aaa文件中搜索<code class="docutils literal notranslate"><span class="pre">ABORT</span></code>。</p>
<section id="id19">
<h3>迭代中的错误处理<a class="headerlink" href="#id19" title="此标题的永久链接">#</a></h3>
<p>如果pandora能够运行，但是跑着跑着停了，在terminal中<code class="docutils literal notranslate"><span class="pre">ABORT:</span> <span class="pre">run</span> <span class="pre">stopped</span> <span class="pre">because</span> <span class="pre">of</span> <span class="pre">an</span> <span class="pre">error.</span></code>以及在aaa文件中的ITERATION后面有一大堆这样的错误：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$%&amp;:     MOTOR               Message
-------------------------------------------------------------------------------------------------------------------------------

Matrix inversion failed:                     Script-M matrix for CSF, lambda =  1.250000000000E+02 (SUB  0, OVR  1)          

%&amp;$:     MOTOR               End of Output                                     ................................................
</pre></div>
</div>
<p>就意味着有某个或者某些需要指定的变量未指定，需要看看是哪个；具体是哪个我也不知道hhhh。</p>
</section>
<section id="id20">
<h3>其他错误处理<a class="headerlink" href="#id20" title="此标题的永久链接">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Error</span> <span class="pre">in</span> <span class="pre">LUCK</span> <span class="pre">:</span> <span class="pre">trying</span> <span class="pre">to</span> <span class="pre">Open/formatted</span> <span class="pre">for</span> <span class="pre">read</span> <span class="pre">on</span> <span class="pre">unit</span>&#160;&#160; <span class="pre">8;</span> <span class="pre">IOSTAT</span> <span class="pre">=</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">29</span></code></p></li>
</ul>
<p>这个具体是指没有找到<code class="docutils literal notranslate"><span class="pre">.res</span></code>文件，加上就好了；其他的话去说明文档里面看看<code class="docutils literal notranslate"><span class="pre">unit</span></code>对应的文件，检查一下有没有。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">IU</span> <span class="pre">=</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">2,</span> <span class="pre">IL</span> <span class="pre">=</span>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">1</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">an</span> <span class="pre">INPAIR-transition.</span></code></p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">RHO</span></code>出问题了。有的时候当程序很快就停下来的时候，看看<code class="docutils literal notranslate"><span class="pre">.jrl</span></code>里面的命令是否完全被读进去了。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Continuum</span> <span class="pre">Optical</span> <span class="pre">Depth,</span> <span class="pre">Lambda</span> <span class="pre">=</span>&#160; <span class="pre">5.999999999994E+01</span>&#160;&#160;&#160;&#160;&#160;&#160; <span class="pre">:</span> <span class="pre">is</span> <span class="pre">unacceptable.</span></code></p></li>
</ul>
<p>这个一般是算出来的<code class="docutils literal notranslate"><span class="pre">Z</span></code>不是单调递增引起的，修改<code class="docutils literal notranslate"><span class="pre">Z</span></code>并restart一次一般可以解决。</p>
<p>–0518增补：在修改<code class="docutils literal notranslate"><span class="pre">Z</span></code>之前要先看看<code class="docutils literal notranslate"><span class="pre">ZMASS</span></code>有没有不连续的地方。有的时候直接对<code class="docutils literal notranslate"><span class="pre">ZMASS</span></code>进行smooth反而会引起不连续，因为<code class="docutils literal notranslate"><span class="pre">ZMASS</span></code>在量级上的变化很大；either不smooth，或者取对数之后smooth。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">The</span> <span class="pre">&quot;averaged&quot;</span> <span class="pre">opacity</span> <span class="pre">data</span> <span class="pre">file</span> <span class="pre">is</span> <span class="pre">empty.</span></code></p></li>
</ul>
<p>这是因为选项<code class="docutils literal notranslate"><span class="pre">AVELOP</span></code>被打开了但是叫做<code class="docutils literal notranslate"><span class="pre">average</span></code>的文件并不在主文件夹里面；参见wup第272页。<code class="docutils literal notranslate"><span class="pre">Pandora-v2.2.0/tables/opacities</span></code>中有一个<code class="docutils literal notranslate"><span class="pre">average.dat</span></code>文件，但是是空的，暂时不知道有无联系。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">The</span> <span class="pre">given</span> <span class="pre">set</span> <span class="pre">is</span> <span class="pre">bad.</span></code></p></li>
</ul>
<p>我遇上是在从头开始的run里面的<code class="docutils literal notranslate"><span class="pre">RHO</span></code>（或者<code class="docutils literal notranslate"><span class="pre">Jbar</span></code>）算着算着就全部变成NaN了，所以算不下去。这种情况的话测试表明将RHO selection parameters <code class="docutils literal notranslate"><span class="pre">RHOPT</span></code>从默认的<code class="docutils literal notranslate"><span class="pre">RHOJ</span></code>换成<code class="docutils literal notranslate"><span class="pre">RHOS</span></code>就不会报错了。可能是initial run里面<code class="docutils literal notranslate"><span class="pre">RHOS</span></code>需要的参数为正确初始化。这里连带出另外一个错，但是错误提示里面有说将<code class="docutils literal notranslate"><span class="pre">METEP</span></code>从0换成3就可以了。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DIVVY:</span>&#160; <span class="pre">A/B</span> <span class="pre">=</span> <span class="pre">?</span> <span class="pre">because</span> <span class="pre">A</span> <span class="pre">=</span>&#160; <span class="pre">8.74825511E-01</span> <span class="pre">and</span> <span class="pre">B</span> <span class="pre">=</span>&#160; <span class="pre">0.00E+00</span></code></p></li>
</ul>
<p>如果这个错是<code class="docutils literal notranslate"><span class="pre">MINNOW</span></code>报的话，那么很大概率是没有给<code class="docutils literal notranslate"><span class="pre">ZMASS</span></code>。具体原因还是不明。</p>
</section>
</section>
<section id="id21">
<h2>输出结果阅读理解<a class="headerlink" href="#id21" title="此标题的永久链接">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">bin/lookat.x</span></code>提供了一个在命令行里面阅读的程序，里面有解释；不过这都是老黄历的东西了，还是用extract出来用编辑器看方便。</p>
<p>这里就顺着<code class="docutils literal notranslate"><span class="pre">.aix</span></code>文件提供的目录去看看输出文件<code class="docutils literal notranslate"><span class="pre">.aaa</span></code>里面有些什么东西，哪些东西比较重要。</p>
<section id="options">
<h3>OPTIONS<a class="headerlink" href="#options" title="此标题的永久链接">#</a></h3>
<p>顾名思义就是控制程序的所有选项（看这个长度我觉得可以认为是所有的），分为<code class="docutils literal notranslate"><span class="pre">PRINTOUT</span></code>, <code class="docutils literal notranslate"><span class="pre">CALCULATION</span></code>, <code class="docutils literal notranslate"><span class="pre">MISCELLNEOUS</span></code>和<code class="docutils literal notranslate"><span class="pre">TEST/DEBUG</span></code>。所有的选项名称都和wup里面的选项名称对应，输出中也包含了选项的开关以及解释。</p>
</section>
<section id="tables">
<h3>TABLES<a class="headerlink" href="#tables" title="此标题的永久链接">#</a></h3>
<p>这里主要是谱线计算的一些事先算好的表格，有用信息似乎不多。</p>
</section>
<section id="iterates">
<h3>ITERATES<a class="headerlink" href="#iterates" title="此标题的永久链接">#</a></h3>
<p>呈现的是各个参数（不是全部）各次迭代除以最后一次的比例。</p>
</section>
<section id="prof">
<h3>PROF<a class="headerlink" href="#prof" title="此标题的永久链接">#</a></h3>
<p>PROF分为Background Intensity, Background Flux, Line-free Intensity, Line-free Flux和Profile，其中Intensity和Profile分$<span class="math notranslate nohighlight">\( \mu \)</span>$，Flux不分，Profile没有明确的章节头。
暂未知打开SPHERE后会有什么变化。</p>
</section>
</section>
<section id="id22">
<h2>示例文件<a class="headerlink" href="#id22" title="此标题的永久链接">#</a></h2>
<p>这里给出了7个示例，前4个有详细说明。</p>
<ul class="simple">
<li><p>示例一是单文件作为输入的第1种运行（氢的占据数更新）</p></li>
<li><p>示例二和示例一是一样的，只不过用了多个输入文件</p></li>
<li><p>示例三是示例二的重启运行</p></li>
<li><p>示例四是从0开始的第3种运行</p></li>
</ul>
<section id="id23">
<h3>示例一<a class="headerlink" href="#id23" title="此标题的永久链接">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">bin/pandora</span> <span class="pre">-io</span> <span class="pre">1/</span> <span class="pre">-atoms</span> <span class="pre">1/</span> <span class="pre">demo1</span> <span class="pre">none</span> <span class="pre">''</span> <span class="pre">001</span> <span class="pre">&gt;&amp;</span> <span class="pre">1/demo1.log</span></code></p>
<p>有几个地方是需要看看运行效果的：</p>
<ul class="simple">
<li><p>“Plot of log10s of ST…”中$<span class="math notranslate nohighlight">\( S(n) \)</span><span class="math notranslate nohighlight">\(和\)</span><span class="math notranslate nohighlight">\( S \)</span>$应该要接近</p></li>
<li><p>在RHO AND RBD中的”Consistency CHECKS”的数字如果接近1，则说明可以（但是不代表迭代完成了）</p></li>
<li><p>LEVEL 1 TO K中RK-1的”Old/New”数字应该靠近1</p></li>
<li><p>最后的”Iterative Ratio”不应该有大的波动</p></li>
<li><p>NE不应该有大的波动（在哪里？）</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">.atm</span></code>文件和主控制文件必须分开，这里只是简单地将主控制文件复制了一份。</p>
</section>
<section id="id24">
<h3>示例二<a class="headerlink" href="#id24" title="此标题的永久链接">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">bin/pandora</span> <span class="pre">-io</span> <span class="pre">2/</span> <span class="pre">-atoms</span> <span class="pre">2/</span> <span class="pre">demo2</span> <span class="pre">h</span>&#160;&#160;&#160; <span class="pre">l3</span> <span class="pre">001</span> <span class="pre">&gt;&amp;</span> <span class="pre">2/demo2.log</span></code></p>
<p>之前说了示例二和示例一是完全一样的，只是将文件分开了，那么为什么命令也不一样了呢？实际上有本质区别的只有<code class="docutils literal notranslate"><span class="pre">h</span></code>和<code class="docutils literal notranslate"><span class="pre">l3</span></code>两个地方,<code class="docutils literal notranslate"><span class="pre">l3</span></code>指明了原子结构文件的文件名为<code class="docutils literal notranslate"><span class="pre">hl3.atm</span></code>，而<code class="docutils literal notranslate"><span class="pre">h</span></code>指明了主控制文件的文件名为<code class="docutils literal notranslate"><span class="pre">demo2h.dat</span></code>。</p>
<p><code class="docutils literal notranslate"><span class="pre">.dat</span></code>文件可以分为<code class="docutils literal notranslate"><span class="pre">.mod</span></code>, <code class="docutils literal notranslate"><span class="pre">.atm</span></code>, <code class="docutils literal notranslate"><span class="pre">.res</span></code>, <code class="docutils literal notranslate"><span class="pre">.dat</span></code>文件，对应wup361页示例一中提到四个Group。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.atm</span></code>：原子/离子的模型数据</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.mod</span></code>：大气模型的数据</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.res</span></code>：<code class="docutils literal notranslate"><span class="pre">.rst</span></code>文件提供的数据以及Lyman计算</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.dat</span></code>：文件头、控制选项、文件结构(<code class="docutils literal notranslate"><span class="pre">GO</span></code>)</p></li>
</ul>
<p>具体内容其实没什么所谓，是用<code class="docutils literal notranslate"><span class="pre">USE</span></code>语句控制的。不过这么划分对批处理有好处。</p>
</section>
<section id="id25">
<h3>示例三<a class="headerlink" href="#id25" title="此标题的永久链接">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">bin/pandora</span> <span class="pre">-io</span> <span class="pre">3/</span> <span class="pre">-atoms</span> <span class="pre">3/</span> <span class="pre">demo3</span> <span class="pre">h</span>&#160;&#160;&#160; <span class="pre">l3</span> <span class="pre">001</span> <span class="pre">&gt;&amp;</span> <span class="pre">3/demo3.log</span></code></p>
<p>示例三是示例二的重启运行（人类的本质是复读机，对吧）。这个时候示例二中提到的<code class="docutils literal notranslate"><span class="pre">.res</span></code>文件实际上就是输出的<code class="docutils literal notranslate"><span class="pre">.rst</span></code>文件。如果不改名字的话，可以先将旧的<code class="docutils literal notranslate"><span class="pre">.res</span></code>文件删掉，再将<code class="docutils literal notranslate"><span class="pre">.rst</span></code>改成<code class="docutils literal notranslate"><span class="pre">.res</span></code>。其次是恒星大气模型中从0(或LDR)开始计算的一些值：<code class="docutils literal notranslate"><span class="pre">NE</span></code>, <code class="docutils literal notranslate"><span class="pre">NP</span></code>, <code class="docutils literal notranslate"><span class="pre">HN</span> <span class="pre">1</span></code>, …, <code class="docutils literal notranslate"><span class="pre">HN</span> <span class="pre">15</span></code>, <code class="docutils literal notranslate"><span class="pre">BDH</span> <span class="pre">1</span></code>, …, <code class="docutils literal notranslate"><span class="pre">BDH</span> <span class="pre">15</span></code>现在是从<code class="docutils literal notranslate"><span class="pre">.pop</span></code>文件中复制过来的。<code class="docutils literal notranslate"><span class="pre">.msc</span></code>中也会有一些更新了的参数，比如说<code class="docutils literal notranslate"><span class="pre">FNRMLA</span></code>, <code class="docutils literal notranslate"><span class="pre">FNRMLB</span></code>。</p>
<p>示例二中的<code class="docutils literal notranslate"><span class="pre">hl2.atm</span></code>可以直接拿到示例三中使用（我估计以后我也是这么做），但是作者这里还加了点东西。有一些东西是<code class="docutils literal notranslate"><span class="pre">atom/</span></code>的文件里面没有的，所以还是要具体看看加了什么。</p>
<p>示例三的<code class="docutils literal notranslate"><span class="pre">.dat</span></code>也被改变了。</p>
</section>
<section id="id26">
<h3>示例四<a class="headerlink" href="#id26" title="此标题的永久链接">#</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">bin/pandora</span> <span class="pre">-io</span> <span class="pre">4/</span> <span class="pre">-atoms</span> <span class="pre">4/</span> <span class="pre">demo4</span> <span class="pre">mg2</span>&#160; <span class="pre">l2</span> <span class="pre">001</span> <span class="pre">&gt;&amp;</span> <span class="pre">4/demo4.log</span></code></p>
<p>这是一个Mg-II的从0开始的运行；<code class="docutils literal notranslate"><span class="pre">.atm</span></code>里面是Mg的一个二能级模型，用的是PRD。但是PRD参数并不储存在<code class="docutils literal notranslate"><span class="pre">.atm</span></code>里面（因为RD信息和原子模型没有关系）。</p>
<p><code class="docutils literal notranslate"><span class="pre">GMMA</span></code>似乎是PRD的一个好坏目标？越接近-1越好的样子。</p>
<p><code class="docutils literal notranslate"><span class="pre">.mod</span></code>文件里面包含了H, He-I, He-II, C-I, Si-I的密度信息(<code class="docutils literal notranslate"><span class="pre">XXK</span></code>, <code class="docutils literal notranslate"><span class="pre">XXN</span></code>等)；这些是之前占据数更新运行的结果。</p>
<p>重启这个示例的运行也是很简单的，删掉<code class="docutils literal notranslate"><span class="pre">.res</span></code>文件，将<code class="docutils literal notranslate"><span class="pre">.rst</span></code>改成<code class="docutils literal notranslate"><span class="pre">.res</span></code>；同理将<code class="docutils literal notranslate"><span class="pre">.jnr</span></code>改成<code class="docutils literal notranslate"><span class="pre">.jnu</span></code>，把<code class="docutils literal notranslate"><span class="pre">.dat</span></code>文件里面该改的改掉。注意<code class="docutils literal notranslate"><span class="pre">JNUNC</span></code>需要大于0。</p>
</section>
<section id="id27">
<h3>示例六<a class="headerlink" href="#id27" title="此标题的永久链接">#</a></h3>
<p>示例六是一个很重要的例子。这里面的模型实际上就是Dupree+2013中的巨星模型。由于它比较重要，在这里我们逐行解释模型和输入文件的意思。</p>
<p>我们要解决的问题：</p>
<ul class="simple">
<li><p>为什么简单模型里面提高TR温度会使得H-alpha线变成发射而Dupree+13中的不会？是因为有些选项不是默认了吗？</p></li>
</ul>
<section id="h">
<h4>H线部分<a class="headerlink" href="#h" title="此标题的永久链接">#</a></h4>
<p>我们从leidh.dat以及leid.mod开始。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">LEID</span>       <span class="n">MODEL</span> <span class="n">LEID</span>   <span class="mi">5</span> <span class="n">L</span> <span class="n">H</span>        <span class="n">ITER</span> <span class="mi">07</span><span class="o">-</span><span class="mi">17</span>     <span class="mi">13</span><span class="o">-</span><span class="n">Oct</span><span class="o">-</span><span class="mi">24</span>
<span class="o">&gt;</span>  <span class="o">---------</span><span class="mi">1</span><span class="o">------------</span><span class="mi">1</span><span class="o">------------</span><span class="mi">1</span><span class="o">------------</span><span class="mi">1</span><span class="o">------------</span><span class="mi">1</span>
<span class="o">&gt;</span>
<span class="n">USE</span> <span class="p">(</span> <span class="n">MODEL</span> <span class="p">)</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p>一开始我们就从leid.dat跳到了leid.mod中，读取leid.mod中的行直到遇上<code class="docutils literal notranslate"><span class="pre">USE</span> <span class="pre">(</span> <span class="pre">INPUT</span> <span class="pre">)</span> <span class="pre">&gt;</span> </code>。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span>
<span class="o">&gt;</span>   <span class="n">M</span> <span class="n">O</span> <span class="n">D</span> <span class="n">E</span> <span class="n">L</span>   <span class="n">LEID</span>
<span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">AVELOP</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">OMIT</span> <span class="p">(</span> <span class="n">AVOPRNT</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">INCIDNT</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">do</span> <span class="p">(</span> <span class="n">INCIFRNT</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">DO</span>   <span class="p">(</span> <span class="n">INTEDIT</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">VTV</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">SPHERE</span> <span class="p">)</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">AVELOP</span></code>默认是关闭的，这里写不写都可以。<code class="docutils literal notranslate"><span class="pre">INCIDNT</span></code>也应该关闭，除非我们明确有额外的光源从高处照下来。<code class="docutils literal notranslate"><span class="pre">INCIFRNT</span></code>虽然开启，但是因为<code class="docutils literal notranslate"><span class="pre">INCIDNT</span></code>所以应该是没用的（需要确认）。<code class="docutils literal notranslate"><span class="pre">INTEDIT</span></code>应该会改变了输入的温度，但是我觉得不需要开。<code class="docutils literal notranslate"><span class="pre">VTV</span></code>会使得<code class="docutils literal notranslate"><span class="pre">VT</span></code>(turbulent pressure velocity)和<code class="docutils literal notranslate"><span class="pre">V</span></code>(broadening velocity=microturbulent velocity)相等，默认是开启的。不知道为什么要关闭。<code class="docutils literal notranslate"><span class="pre">SPHERE</span></code>是最奇怪的一点，论文里面说是球面的，但是这里却关闭了。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">NKA</span> <span class="p">(</span>  <span class="mi">9</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">NVH</span> <span class="p">(</span> <span class="mi">23</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="n">number</span> <span class="n">of</span> <span class="n">HNDV</span><span class="p">,</span> <span class="n">VNH</span> <span class="n">values</span>
<span class="n">NGM</span> <span class="p">(</span>  <span class="mi">0</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">NCQ</span> <span class="p">(</span>  <span class="mi">5</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">INK</span> <span class="p">(</span>  <span class="mi">6</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="n">number</span> <span class="n">of</span> <span class="n">XINK</span><span class="p">,</span> <span class="n">FINK</span> <span class="n">values</span>
<span class="n">LLY</span> <span class="p">(</span>  <span class="mi">0</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>
<span class="n">NAB</span>   <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="n">length</span> <span class="n">of</span> <span class="n">BANDL</span> <span class="p">(</span><span class="n">number</span> <span class="n">of</span> <span class="n">bands</span><span class="p">)</span>
<span class="n">BANDL</span> <span class="p">(</span> <span class="mf">3000.</span> <span class="p">)</span>  <span class="n">BANDU</span> <span class="p">(</span> <span class="mf">8000.</span> <span class="p">)</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">NKA</span></code>是<code class="docutils literal notranslate"><span class="pre">ZALBK</span></code>的长度，默认为2；<code class="docutils literal notranslate"><span class="pre">ZALBK</span></code>是背景谱线不透明度的散射反照律常数。不知道为什么后面没有指定这个值。<code class="docutils literal notranslate"><span class="pre">NVH</span></code>指定的是前多少个<code class="docutils literal notranslate"><span class="pre">V</span></code>的值是从太阳里面来的。<code class="docutils literal notranslate"><span class="pre">NGM</span></code>操作和<code class="docutils literal notranslate"><span class="pre">NVH</span></code>一致，控制的是G multiplier的值，不要指定为好。<code class="docutils literal notranslate"><span class="pre">NCQ</span></code>、<code class="docutils literal notranslate"><span class="pre">INK</span></code>、<code class="docutils literal notranslate"><span class="pre">LLY</span></code>、<code class="docutils literal notranslate"><span class="pre">NAB</span></code>同理。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">N</span>   <span class="p">(</span> <span class="mi">72</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>
<span class="n">NLH</span> <span class="p">(</span>  <span class="mi">15</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">NLZ</span> <span class="p">(</span>  <span class="mi">13</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">NZ2</span> <span class="p">(</span>  <span class="mi">8</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">NLC</span> <span class="p">(</span>  <span class="mi">0</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">NLS</span> <span class="p">(</span>  <span class="mi">0</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">NAL</span> <span class="p">(</span>  <span class="mi">0</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">NMG</span> <span class="p">(</span>  <span class="mi">0</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">NFE</span> <span class="p">(</span>  <span class="mi">0</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">NNA</span> <span class="p">(</span>  <span class="mi">8</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">NCA</span> <span class="p">(</span>  <span class="mi">8</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">NLO</span> <span class="p">(</span>  <span class="mi">14</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">NO2</span> <span class="p">(</span>  <span class="mi">0</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">NO3</span> <span class="p">(</span>  <span class="mi">0</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">NLU</span> <span class="p">(</span>  <span class="mi">0</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>
<span class="n">USE</span> <span class="p">(</span> <span class="n">INPUT</span> <span class="p">)</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p>这一堆<code class="docutils literal notranslate"><span class="pre">NXX</span></code>说明的是输入文件中元素能级population被指定的数量，比如<code class="docutils literal notranslate"><span class="pre">NLZ</span> <span class="pre">(</span> <span class="pre">13</span> <span class="pre">)</span></code>指的是He-I有13个能级的population被指定，后面肯定有<code class="docutils literal notranslate"><span class="pre">HEN</span> <span class="pre">1-13</span></code>这堆东西。</p>
<p>然后我们就回到leid.dat里面了。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span>
<span class="n">USE</span> <span class="p">(</span> <span class="n">ATOM</span> <span class="p">)</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p>使用默认的原子能级数据，不多说了。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">K</span>      <span class="p">(</span> <span class="mi">55</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">kmmax</span>  <span class="p">(</span> <span class="mi">700</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">kstmax</span> <span class="p">(</span>  <span class="mi">35</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">NWV</span> <span class="p">(</span> <span class="mi">11</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">nvx</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">K</span></code>就是<code class="docutils literal notranslate"><span class="pre">KS</span></code>，<code class="docutils literal notranslate"><span class="pre">XISYM</span></code>的长度；这个玩意儿决定了合成光谱覆盖的长度；这个设置意味着合成光谱还是挺宽的。<code class="docutils literal notranslate"><span class="pre">kmmax</span></code>是<code class="docutils literal notranslate"><span class="pre">XIFUL</span></code>的长度限制，防止占用内存太大，我觉得可以不设定。<code class="docutils literal notranslate"><span class="pre">kstmax</span></code>是<code class="docutils literal notranslate"><span class="pre">kst</span></code>的最大值，<code class="docutils literal notranslate"><span class="pre">kst</span></code>是<code class="docutils literal notranslate"><span class="pre">XISYMT</span></code>的长度。<code class="docutils literal notranslate"><span class="pre">NWV</span></code>是<code class="docutils literal notranslate"><span class="pre">WAVES</span></code>的长度，<code class="docutils literal notranslate"><span class="pre">WAVES</span></code>是连续谱计算的额外的波长点，设定之后会在输出里面多出一个<code class="docutils literal notranslate"><span class="pre">XX.XX</span>&#160; <span class="pre">NANOM</span></code>的章节，<code class="docutils literal notranslate"><span class="pre">XX</span></code>是设定的波长。<strong>这个设定非常有用，这一节提供了不透明度、光深、连续谱源函数、吸收源函数等对计算形成位置很有用的信息（特别是线翼的形成位置）</strong>。<code class="docutils literal notranslate"><span class="pre">NVX</span></code>是<code class="docutils literal notranslate"><span class="pre">VX</span></code>表格的数量，<code class="docutils literal notranslate"><span class="pre">VX</span></code>设定了计算谱线时候大气额外的膨胀速度；<code class="docutils literal notranslate"><span class="pre">VXS</span></code>是计算源函数时候的膨胀速度，它比<code class="docutils literal notranslate"><span class="pre">VX</span></code>更基本。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">L</span>   <span class="p">(</span> <span class="mi">6</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="n">length</span> <span class="n">of</span> <span class="n">MU</span> <span class="p">(</span><span class="ow">not</span> <span class="n">needed</span> <span class="n">when</span> <span class="n">sphere</span><span class="o">=</span><span class="n">on</span><span class="p">)</span>
<span class="n">LF</span>  <span class="p">(</span> <span class="mi">6</span> <span class="p">)</span>  <span class="o">&gt;</span> <span class="n">length</span> <span class="n">of</span> <span class="n">MUF</span> <span class="p">(</span><span class="ow">not</span> <span class="n">needed</span> <span class="n">when</span> <span class="n">sphere</span><span class="o">=</span><span class="n">on</span><span class="p">)</span>
</pre></div>
</div>
<p>这俩是视线方向的位置（<code class="docutils literal notranslate"><span class="pre">MU</span></code>、<code class="docutils literal notranslate"><span class="pre">MUF</span></code>）的数量，<code class="docutils literal notranslate"><span class="pre">MU</span></code>为1是圆面中心，越小越往边缘走。在<code class="docutils literal notranslate"><span class="pre">SPHERE</span></code>打开之后不用管。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">do</span> <span class="p">(</span> <span class="n">addcopr</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">do</span> <span class="p">(</span> <span class="n">adn1dmp</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="nb">all</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">bdprnt</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">bdgraf</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">bdqprdt</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">cijprnt</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">comprk</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">do</span> <span class="p">(</span> <span class="n">conflux</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">didhc</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">do</span> <span class="p">(</span> <span class="n">dpdwprnt</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">do</span> <span class="p">(</span> <span class="n">elecprnt</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">do</span> <span class="p">(</span> <span class="n">emigraf</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">DO</span> <span class="p">(</span> <span class="n">EMIPRNT</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">do</span> <span class="p">(</span> <span class="n">emisum</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">do</span> <span class="p">(</span> <span class="n">EPCOMP</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">every</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">fdbcopr</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">flwbroad</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">DO</span> <span class="p">(</span> <span class="n">HELPRNT</span> <span class="n">HEL2PRNT</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">DO</span> <span class="p">(</span> <span class="n">HMS</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">indprnt</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">do</span> <span class="p">(</span> <span class="n">komprnt</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">lbdprnt</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">linecopr</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">LSFGRAF</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">LSFPRNT</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">LYMAN</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">DO</span> <span class="p">(</span> <span class="n">OPAPRNT</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">origin</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">orshort</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">do</span> <span class="p">(</span> <span class="n">phase2</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">PIJPRNT</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">prdprnt</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">procprnt</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">DO</span> <span class="p">(</span> <span class="n">PROSAV</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">rateall</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">ratecopr</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">RATEFULL</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">OMIT</span> <span class="p">(</span> <span class="n">RATEGRAF</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">do</span> <span class="p">(</span> <span class="n">rateprnt</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">ratesumm</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">do</span> <span class="p">(</span> <span class="n">rhbprdt</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">do</span> <span class="p">(</span> <span class="n">RIJPRNT</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">sebug</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">secomp</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">do</span> <span class="p">(</span> <span class="n">seprnt</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">do</span> <span class="p">(</span> <span class="n">SPECSAV</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">do</span> <span class="p">(</span> <span class="n">stimprnt</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">do</span> <span class="p">(</span> <span class="n">tauprnt</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">OMIT</span> <span class="p">(</span> <span class="n">TEGRAF</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">waveprnt</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">wtabprnt</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">DO</span> <span class="p">(</span> <span class="n">ZPRNT</span> <span class="p">)</span> <span class="o">&gt;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">omit</span> <span class="p">(</span> <span class="n">amdiff</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span>
<span class="n">do</span> <span class="p">(</span> <span class="n">bdcalc</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">*</span>
<span class="n">do</span> <span class="p">(</span> <span class="n">bsmooth</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">*</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">calcool</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">cefacts</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">clnorm</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">*</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">diffana</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">*</span>
<span class="n">do</span> <span class="p">(</span> <span class="n">dsmooth</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">*</span>
<span class="n">do</span> <span class="p">(</span> <span class="n">emerint</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">expand</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">henorm</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">*</span>
<span class="n">do</span> <span class="p">(</span> <span class="n">HSE</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">*</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">nedit</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span>
<span class="n">do</span> <span class="p">(</span> <span class="n">prdmeth</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span>
<span class="n">do</span> <span class="p">(</span> <span class="n">rhedit</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">*</span>
<span class="n">do</span> <span class="p">(</span> <span class="n">rsmooth</span>  <span class="p">)</span> <span class="o">&gt;</span> <span class="o">*</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">sedit</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">*</span>
<span class="n">OMIT</span> <span class="p">(</span> <span class="n">SLYR</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">*</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">sphere</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">**</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">SSMOOTH</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">ulnorm</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">*</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">zcomp</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span>
<span class="o">&gt;</span>
<span class="n">GO</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p>这里的各种选项我把它们分成了输出组和计算组，输出组（第一组）应该对结果没有影响，计算组（第二组）后面如果带减号则和默认一致，星号则和默认不同。
有个特点是和Lyman有关的基本上都是关闭的，这可能是导致Lyman线Ratio错误的原因，但是我们这里不关心它们。另外是一些细致的计算和smooth被打开了。
打开以及关闭<code class="docutils literal notranslate"><span class="pre">SPHERE</span></code>对结果稍有影响（废话），但是是一致的。到这里B部分结束。</p>
<p>我尝试了将和默认一致的选项全部删去时结果是不是一样的。结果是一样的（那你这个模型还写这么多！）</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">jstin</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>
<span class="n">USE</span> <span class="p">(</span> <span class="n">MODEL</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">jstin</span></code>控制是否仅进行输入运行，1为仅输入运行但是这里被注释掉了。然后我们继续跑到模型文件里面。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span>
<span class="o">&gt;</span>   <span class="n">M</span> <span class="n">O</span> <span class="n">D</span> <span class="n">E</span> <span class="n">L</span>   <span class="n">LEID</span>
<span class="o">&gt;</span>
<span class="n">MODLAB</span> <span class="p">(</span> <span class="n">LEID</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">HE</span> <span class="n">LAB</span> <span class="mf">11.3</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="n">was</span> <span class="mf">10.60</span><span class="p">,</span> <span class="mf">11.22</span><span class="p">,</span> <span class="mf">10.923</span><span class="p">,</span> <span class="mf">10.85</span><span class="p">,</span> <span class="mf">10.75</span><span class="p">,</span> <span class="mf">11.3</span><span class="p">,</span> <span class="mf">11.1</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">HE2</span> <span class="n">LAB</span> <span class="mf">11.3</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="n">was</span> <span class="mf">10.60</span><span class="p">,</span> <span class="mf">11.22</span><span class="p">,</span> <span class="mf">10.923</span><span class="p">,</span> <span class="mf">10.85</span><span class="p">,</span> <span class="mf">10.75</span><span class="p">,</span> <span class="mf">11.3</span><span class="p">,</span> <span class="mf">11.1</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">LI</span> <span class="n">LAB</span> <span class="mf">1.1</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">BE</span> <span class="n">LAB</span> <span class="o">-</span><span class="mf">1.01</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">B</span> <span class="n">LAB</span> <span class="mf">.51</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">C</span> <span class="n">LAB</span> <span class="mf">5.82</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">N</span> <span class="n">LAB</span> <span class="mf">7.76</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">O</span> <span class="n">LAB</span> <span class="mf">7.219</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">O2</span> <span class="n">LAB</span> <span class="mf">7.219</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">O3</span> <span class="n">LAB</span> <span class="mf">7.219</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">F</span> <span class="n">LAB</span> <span class="mf">2.37</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">NE</span> <span class="n">LAB</span> <span class="mf">6.14</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">NA</span> <span class="n">LAB</span> <span class="mf">3.91</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">MG</span> <span class="n">LAB</span> <span class="mf">5.6</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">AL</span> <span class="n">LAB</span> <span class="mf">3.18</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">SI</span> <span class="n">LAB</span> <span class="mf">5.77</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">P</span> <span class="n">LAB</span> <span class="mf">3.22</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">S</span> <span class="n">LAB</span> <span class="mf">5.33</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">CL</span> <span class="n">LAB</span> <span class="mf">3.31</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">AR</span> <span class="n">LAB</span> <span class="mf">4.61</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">K</span> <span class="n">LAB</span> <span class="mf">3.13</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">CA</span> <span class="n">LAB</span> <span class="mf">4.76</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">SC</span> <span class="n">LAB</span> <span class="mf">.69</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">TI</span> <span class="n">LAB</span> <span class="mf">2.65</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">V</span> <span class="n">LAB</span> <span class="mf">1.56</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">CR</span> <span class="n">LAB</span> <span class="mf">3.52</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">MN</span> <span class="n">LAB</span> <span class="mf">2.74</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">FE</span> <span class="n">LAB</span> <span class="mf">5.73</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">CO</span> <span class="n">LAB</span> <span class="mf">2.48</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">NI</span> <span class="n">LAB</span> <span class="mf">3.88</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">CU</span> <span class="n">LAB</span> <span class="mf">2.0</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">ZN</span> <span class="n">LAB</span> <span class="mf">2.26</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">GA</span> <span class="n">LAB</span> <span class="mf">.85</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">GE</span> <span class="n">LAB</span> <span class="mf">1.46</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">RB</span> <span class="n">LAB</span> <span class="mf">2.68</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">SR</span> <span class="n">LAB</span> <span class="mf">.79</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">Y</span> <span class="n">LAB</span> <span class="o">-</span><span class="mf">.41</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">ZR</span> <span class="n">LAB</span> <span class="o">-</span><span class="mf">.25</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ELEMENT</span> <span class="p">(</span> <span class="n">BA</span> <span class="n">LAB</span> <span class="o">-</span><span class="mf">.20</span> <span class="p">)</span> <span class="o">&gt;</span>

</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">MODLAB</span></code>定义了这个大气模型的名字，你喜欢的话叫村花也没人会抗议的。后面的一堆<code class="docutils literal notranslate"><span class="pre">ELEMENT</span></code>请参阅前面章节。<strong><code class="docutils literal notranslate"><span class="pre">ELEMENT</span></code>的选择非常重要！对H-alpha线有很大的影响！</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">KURIN</span> <span class="p">(</span> <span class="mi">6</span> <span class="p">)</span> <span class="o">&gt;</span>  
<span class="o">&gt;</span>
<span class="n">NABS</span> <span class="p">(</span> <span class="mi">22</span> <span class="mi">23</span> <span class="mi">39</span> <span class="mi">42</span> <span class="mi">43</span> <span class="mi">44</span> <span class="mi">45</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>      
<span class="n">ndwm</span> <span class="p">(</span> <span class="mi">36</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">KOELS</span> <span class="p">(</span> <span class="mi">0</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>
<span class="n">HNDV</span> <span class="p">(</span> <span class="o">&gt;</span>
<span class="mf">1.E+05</span> <span class="mf">3.E05</span> <span class="mf">1.E+06</span> <span class="mf">3.E+06</span> <span class="mf">1.E+07</span> <span class="mf">3.E+07</span> <span class="mf">1.E+08</span> <span class="mf">3.E+08</span> <span class="mf">1.E+09</span> <span class="mf">3.E+09</span> <span class="o">&gt;</span>
<span class="mf">1.E+10</span> <span class="mf">3.E+10</span> <span class="mf">1.E+11</span> <span class="mf">3.E+11</span> <span class="mf">1.E+12</span> <span class="mf">3.E+12</span> <span class="mf">1.E+13</span> <span class="mf">3.E+13</span> <span class="mf">1.E+14</span> <span class="mf">3.E+14</span> <span class="o">&gt;</span>
<span class="mf">1.E+15</span> <span class="mf">3.E+15</span> <span class="mf">1.E+16</span> <span class="o">&gt;</span>
<span class="p">)</span> <span class="o">&gt;</span>
<span class="n">VNH</span> <span class="p">(</span> <span class="o">&gt;</span>
<span class="mf">30.</span> <span class="mf">30.</span> <span class="mf">29.5</span> <span class="mf">26.</span> <span class="mf">27.</span> <span class="mf">25.</span> <span class="mf">23.7</span> <span class="mf">22.5</span>  <span class="mf">21.</span> <span class="mf">5.3</span> <span class="o">&gt;</span>
<span class="mf">5.3</span> <span class="mf">5.3</span> <span class="mf">5.3</span> <span class="mf">5.3</span> <span class="mf">5.3</span> <span class="mf">5.3</span> <span class="mf">5.3</span> <span class="mf">5.3</span> <span class="mf">5.3</span> <span class="mf">5.3</span> <span class="o">&gt;</span>
<span class="mf">5.3</span> <span class="mf">5.</span> <span class="mf">5.</span> <span class="p">)</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">KURIN</span></code>指定程序使用Kurucz中的谱线不透明度中的哪个。它们被储存在了<code class="docutils literal notranslate"><span class="pre">opacities/statistical.dat</span></code>中，<strong>需要换不同的值去测试有什么影响</strong>。[尝试从6换到了1，没有影响。]
<code class="docutils literal notranslate"><span class="pre">NABS</span></code>可以删除背景不透明度中包含的absorber/emitter，数字可以在输出的ATMOSPHERE中的’List of potential contributors to “continuum” or “background” absorbtion and emission’部分查到。<strong>注释掉它的话H-alpha和H-beta线就变成了发射线，所以应该是其中的某个东西发射了。</strong>
<code class="docutils literal notranslate"><span class="pre">ndwm</span></code>指明了多普勒致宽的基准位置，可能是没有致宽和有致宽之间的那几个点。在这里它和默认值是一样的。
<code class="docutils literal notranslate"><span class="pre">KOELS</span></code>是<code class="docutils literal notranslate"><span class="pre">ORIGIN</span></code>（光强形成位置）中每条线的输出开关，打开之后可能输出更多的东西。
<code class="docutils literal notranslate"><span class="pre">HNDV</span></code>是与<code class="docutils literal notranslate"><span class="pre">VNH</span></code>对应的氢密度表格，<code class="docutils literal notranslate"><span class="pre">VNH</span></code>是<code class="docutils literal notranslate"><span class="pre">V</span></code>的标准表格，<code class="docutils literal notranslate"><span class="pre">V</span></code>是致宽速度，也就是文章中的turbulent。这是因为turbulent或者说<code class="docutils literal notranslate"><span class="pre">V</span></code>并不需要和Z
<code class="docutils literal notranslate"><span class="pre">Z</span></code>一样，可以短一点，这个时候<code class="docutils literal notranslate"><span class="pre">HNDV</span></code>就起到一个定位的作用了。<strong>需要改变V的取值看看谱线宽度怎么变化</strong>。[将V全部改成0之后发现线翼稍微窄了一点，线心深了一点，和预期类似；但是幅度不大，可能因为是在高处才有大的速度。结论是影响不大。]</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">IRTIS</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="n">default</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">which</span> <span class="n">uses</span> <span class="n">log</span><span class="p">(</span><span class="n">FINK</span><span class="p">)</span>
<span class="o">&gt;</span> <span class="n">XINK</span> <span class="p">(</span> <span class="mf">9.5</span> <span class="mf">10.</span> <span class="mf">500.</span> <span class="mf">501.</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">XINK</span> <span class="p">(</span> <span class="mf">5.94</span> <span class="mf">5.95</span> <span class="mf">9.83</span> <span class="mf">9.84</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">FINK</span> <span class="p">(</span> <span class="n">M</span> <span class="mf">1.E-15</span> <span class="mf">0.</span> <span class="mf">0.</span> <span class="mf">0.</span> <span class="mf">0.</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">XINK</span> <span class="p">(</span> <span class="mf">5.948</span> <span class="mf">5.949</span> <span class="mf">7.48</span> <span class="mf">7.51</span> <span class="mf">13.16</span> <span class="mf">13.17</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">FINK</span> <span class="p">(</span> <span class="n">M</span> <span class="mf">5.E-11</span> <span class="mf">0.</span> <span class="mf">3.</span> <span class="mf">3.</span> <span class="mf">0.</span> <span class="mf">0.</span> <span class="mf">0.</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">IRTIS</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">&gt;</span>

</pre></div>
</div>
<p>这堆命令控制的是入射的辐射（可能是在模型之外入射的辐射？）。<code class="docutils literal notranslate"><span class="pre">XINK</span></code>指定入射光的频率，<code class="docutils literal notranslate"><span class="pre">FINK</span></code>指定入射光的强度，<code class="docutils literal notranslate"><span class="pre">IRTIS</span></code>控制<code class="docutils literal notranslate"><span class="pre">XINK</span></code>和<code class="docutils literal notranslate"><span class="pre">FINK</span></code>的内插/外推方式，究竟是在<code class="docutils literal notranslate"><span class="pre">XINK</span></code>中线性还是<code class="docutils literal notranslate"><span class="pre">log(XINK)</span></code>中线性这样。上面使用的是默认的设置。<strong>需要注释掉看看有什么变化</strong>。[全部改成0之后谱线似乎没什么很大的改变，应该可以保持默认。]</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="o">&gt;</span> <span class="n">R1N</span> <span class="p">(</span> <span class="mf">1.39E7</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">=</span> <span class="mi">20</span> <span class="n">solar</span> <span class="n">radii</span>
<span class="o">&gt;</span> <span class="n">R1N</span> <span class="p">(</span> <span class="mf">2.09E7</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">=</span> <span class="mi">30</span> <span class="n">solar</span> <span class="n">radii</span>
<span class="n">R1N</span> <span class="p">(</span> <span class="mf">5.88E7</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">=</span> <span class="mi">84</span> <span class="n">solar</span> <span class="n">radii</span>
<span class="n">FABD</span> <span class="p">(</span> <span class="mf">1.</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">CLOGG</span> <span class="p">(</span> <span class="mf">1.74</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">WZM</span> <span class="p">(</span> <span class="mf">.8</span> <span class="p">)</span> <span class="o">&gt;</span>

</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">R1N</span></code>的字面意思是距光源的距离，实际上基本上是作为恒星半径使用。大概是把色球层开始的地方作为一个恒星半径。[改变R1N的值对最后的谱线轮廓影响不大。]
<code class="docutils literal notranslate"><span class="pre">FABD</span></code>是元素丰度的乘数，所有的元素丰度都会乘上这个值，默认是1（奇怪的乘数真多啊）。
<code class="docutils literal notranslate"><span class="pre">CLOGG</span></code>是$<span class="math notranslate nohighlight">\( \log{\mathrm{surface gravity}} \)</span>$，就是平常的logg。不指定的话就会用<code class="docutils literal notranslate"><span class="pre">CGR</span></code>，和太阳的logg比值。<strong>所以之前我一直用的是太阳的logg值…</strong>[但是将<code class="docutils literal notranslate"><span class="pre">CLOGG</span></code>增加到2.74谱线也没什么变化？为什么？]
<code class="docutils literal notranslate"><span class="pre">WZM</span></code>是<code class="docutils literal notranslate"><span class="pre">Z</span></code>的权重，默认是0.8。当我们要求<code class="docutils literal notranslate"><span class="pre">Z</span></code>表要和别的表相匹配的时候（MASS什么的）它会参与计算。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Z</span>                 <span class="p">(</span> <span class="o">&gt;</span>
<span class="o">-</span><span class="mf">1.34498000E+07</span> <span class="o">-</span><span class="mf">1.21944000E+07</span> <span class="o">-</span><span class="mf">1.12022000E+07</span> <span class="o">-</span><span class="mf">1.02707000E+07</span> <span class="o">-</span><span class="mf">9.37975000E+06</span>
<span class="o">...</span>
 <span class="mf">2.62733008E+04</span>  <span class="mf">2.90250000E+04</span>
<span class="p">)</span> <span class="o">&gt;</span>
<span class="n">TE</span>                <span class="p">(</span> <span class="o">&gt;</span>
 <span class="mf">1.32412000E+05</span>  <span class="mf">1.22873000E+05</span>  <span class="mf">1.14001000E+05</span>  <span class="mf">1.05571000E+05</span>  <span class="mf">9.73640000E+04</span>
<span class="o">...</span>
 <span class="mf">9.06100000E+03</span>  <span class="mf">9.29800000E+03</span>
<span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">UPDATE</span>
<span class="o">&gt;</span> <span class="n">LEID</span>       <span class="n">MODEL</span> <span class="n">LEID</span>   <span class="mi">5</span> <span class="n">L</span> <span class="n">H</span>        <span class="n">ITER</span> <span class="mi">52</span><span class="o">-</span><span class="mi">62</span>     <span class="mi">13</span><span class="o">-</span><span class="n">Mar</span><span class="o">-</span><span class="mi">21</span>                 
<span class="n">NE</span>                <span class="p">(</span> <span class="o">&gt;</span>
 <span class="mf">1.15703990E+04</span>  <span class="mf">1.93011710E+04</span>  <span class="mf">3.01664670E+04</span>  <span class="mf">4.74718253E+04</span>  <span class="mf">7.59880490E+04</span>
 <span class="o">...</span>
 <span class="mf">7.09270054E+14</span>  <span class="mf">8.86317471E+14</span>  <span class="p">)</span> <span class="o">&gt;</span>                                            
<span class="o">&gt;</span> <span class="n">LEID</span>       <span class="n">MODEL</span> <span class="n">LEID</span>   <span class="mi">5</span> <span class="n">L</span> <span class="n">H</span>        <span class="n">ITER</span> <span class="mi">52</span><span class="o">-</span><span class="mi">62</span>     <span class="mi">13</span><span class="o">-</span><span class="n">Mar</span><span class="o">-</span><span class="mi">21</span>                 
<span class="n">ZME</span>               <span class="p">(</span> <span class="o">&gt;</span>
 <span class="mf">1.11121707E-04</span>  <span class="mf">1.11121707E-04</span>  <span class="mf">1.11121707E-04</span>  <span class="mf">1.11121707E-04</span>  <span class="mf">1.11121707E-04</span>
 <span class="o">...</span>
 <span class="mf">7.81938802E-06</span>  <span class="mf">9.47751718E-06</span>  <span class="p">)</span> <span class="o">&gt;</span>                                            
<span class="o">&gt;</span> <span class="n">LEID</span>       <span class="n">MODEL</span> <span class="n">LEID</span>   <span class="mi">5</span> <span class="n">L</span> <span class="n">H</span>        <span class="n">ITER</span> <span class="mi">52</span><span class="o">-</span><span class="mi">62</span>     <span class="mi">13</span><span class="o">-</span><span class="n">Mar</span><span class="o">-</span><span class="mi">21</span>                 
<span class="n">NC</span>                <span class="p">(</span> <span class="o">&gt;</span>
 <span class="mf">2.17200027E+04</span>  <span class="mf">3.62503735E+04</span>  <span class="mf">5.67030110E+04</span>  <span class="mf">8.93539750E+04</span>  <span class="mf">1.43384253E+05</span>
 <span class="o">...</span>
 <span class="mf">1.41854011E+15</span>  <span class="mf">1.77263494E+15</span>  <span class="p">)</span> <span class="o">&gt;</span>                                            
<span class="o">&gt;</span> <span class="n">LEID</span>       <span class="n">MODEL</span> <span class="n">LEID</span>   <span class="mi">5</span> <span class="n">L</span> <span class="n">H</span>        <span class="n">ITER</span> <span class="mi">52</span><span class="o">-</span><span class="mi">62</span>     <span class="mi">13</span><span class="o">-</span><span class="n">Mar</span><span class="o">-</span><span class="mi">21</span>                 
<span class="n">BDHM</span>              <span class="p">(</span> <span class="o">&gt;</span>
 <span class="mf">4.49889182E+03</span>  <span class="mf">3.97155540E+03</span>  <span class="mf">3.54675044E+03</span>  <span class="mf">3.15856061E+03</span>  <span class="mf">2.79582013E+03</span>
 <span class="o">...</span>
 <span class="mf">1.00172011E+00</span>  <span class="mf">1.00163211E+00</span>  <span class="p">)</span> <span class="o">&gt;</span>                                          
<span class="o">&gt;</span> <span class="n">LEID</span>       <span class="n">MODEL</span> <span class="n">LEID</span>   <span class="mi">5</span> <span class="n">L</span> <span class="n">H</span>        <span class="n">ITER</span> <span class="mi">32</span><span class="o">-</span><span class="mi">39</span>     <span class="mi">12</span><span class="o">-</span><span class="n">Aug</span><span class="o">-</span><span class="mi">06</span>                 
<span class="n">NH</span>                <span class="p">(</span> <span class="o">&gt;</span>
 <span class="mf">8.70412526E+03</span>  <span class="mf">1.45353581E+04</span>  <span class="mf">2.27573370E+04</span>  <span class="mf">3.59175776E+04</span>  <span class="mf">5.77983267E+04</span>
 <span class="o">...</span>
 <span class="mf">9.55204350E+15</span>  <span class="mf">9.40788717E+15</span>  <span class="p">)</span> <span class="o">&gt;</span>   
 <span class="n">USE</span> <span class="p">(</span> <span class="n">INPUT</span> <span class="p">)</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p>这堆就是正常操作了，模型中最重要的温度密度等参数。要留意除了<code class="docutils literal notranslate"><span class="pre">Z</span></code>和<code class="docutils literal notranslate"><span class="pre">TE</span></code>之外其他都是经过更新的，以及<code class="docutils literal notranslate"><span class="pre">NC</span></code>在手册上标的是在H部分，但是这里是在D部分，所以实际上可能是需要在D部分的。这些读完之后又回到了主控制文件。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">lwnt</span> <span class="p">(</span> <span class="mi">10</span> <span class="p">)</span> <span class="o">&gt;</span>   <span class="k">for</span> <span class="n">KOMPRNT</span>
<span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">idfsw</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">&gt;</span>   <span class="k">for</span> <span class="n">dI</span><span class="o">/</span><span class="n">dh</span> <span class="n">at</span> <span class="n">every</span> <span class="n">line</span> <span class="n">wavelength</span>
<span class="o">&gt;</span>
<span class="n">iwsmd</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ibnview</span> <span class="p">(</span> <span class="mi">50</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">iprdd</span> <span class="p">(</span> <span class="mi">10</span> <span class="p">)</span>  <span class="n">iprdf</span> <span class="p">(</span> <span class="mi">20</span> <span class="p">)</span> <span class="o">&gt;</span>

</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">LWNT</span></code>是控制<code class="docutils literal notranslate"><span class="pre">KOMPRNT</span></code>里面输出的命令，控制输出（谁的？）不透明度的波长间隔，默认是1。
<code class="docutils literal notranslate"><span class="pre">idfsw</span></code>就和注释说的一样，控制输出<code class="docutils literal notranslate"><span class="pre">dI/dh</span></code>。
<code class="docutils literal notranslate"><span class="pre">IWSMD</span></code>应该是控制WAVE SUM输出的内容。
<code class="docutils literal notranslate"><span class="pre">ibnview</span></code>是决定用哪个depth index去呈现BD和ND计算的值。
<code class="docutils literal notranslate"><span class="pre">IPRDD</span></code>控制输出PRD结果的depth index间隔，比如每隔10个；默认是1。
<code class="docutils literal notranslate"><span class="pre">IPRDF</span></code>控制输出PRD结果的频率间隔，比如每隔20个；默认是1。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ZXMIN</span> <span class="p">(</span> <span class="mf">40.</span> <span class="p">)</span>  <span class="n">MNG1</span> <span class="p">(</span> <span class="mi">77</span> <span class="p">)</span> <span class="o">&gt;</span>   <span class="n">MN1</span> <span class="p">(</span> <span class="mi">38</span> <span class="p">)</span>  <span class="o">&gt;</span>
<span class="n">kdiag</span> <span class="p">(</span> <span class="mi">5</span> <span class="p">)</span>  <span class="n">kdifd1</span> <span class="p">(</span> <span class="mi">2</span> <span class="p">)</span>  <span class="n">kdamp</span> <span class="p">(</span> <span class="mi">0</span> <span class="p">)</span>  <span class="n">n1nup</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>  <span class="n">mdfg</span> <span class="p">(</span> <span class="mi">0</span> <span class="p">)</span>  <span class="o">&gt;</span>
<span class="n">kdifgs</span> <span class="p">(</span> <span class="mi">2</span> <span class="p">)</span>  <span class="n">ipdij</span> <span class="p">(</span> <span class="mi">0</span> <span class="p">)</span>  <span class="n">nefdf</span> <span class="p">(</span> <span class="mi">2</span> <span class="p">)</span>  <span class="n">kbnds</span> <span class="p">(</span> <span class="mi">0</span> <span class="p">)</span>  <span class="n">kb1ws</span> <span class="p">(</span> <span class="mi">2</span> <span class="p">)</span>  <span class="o">&gt;</span>
<span class="n">kb1wa</span> <span class="p">(</span> <span class="mi">52</span> <span class="p">)</span>  <span class="n">kb1wb</span> <span class="p">(</span> <span class="mi">54</span> <span class="p">)</span>  <span class="n">ldfd1</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>  <span class="o">&gt;</span>
<span class="o">&gt;</span>
<span class="n">KOOLSUM</span> <span class="p">(</span> <span class="mi">5</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>
<span class="n">USE</span> <span class="p">(</span> <span class="n">ATOM</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">ZXMIN</span></code>、<code class="docutils literal notranslate"><span class="pre">MNG1</span></code>和<code class="docutils literal notranslate"><span class="pre">MN1</span></code>是双极扩散的计算数值，不知道为什么这里要指定（因为<code class="docutils literal notranslate"><span class="pre">amdiff</span></code>没有打开）。
下面三行的东西应该都是扩散的计算细节，<strong>之后整体注释掉看看有没有很大的变化</strong>。[没有任何变化，应该是因为双击扩散没有打开。]
<code class="docutils literal notranslate"><span class="pre">KOOLSUM</span></code>控制哪些成分在计算Total Cooling Rate中被加进了Total Hydrogen里面；具体见Note*41。<strong>也需要改变它的值看看有没有变化</strong>[没有任何变化]</p>
<p>然后又跑到ATOM里面去了，这就不说了，继续看主控制文件的内容。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span>
<span class="n">cimethod</span> <span class="p">(</span> <span class="o">-</span><span class="n">clark</span> <span class="n">shah</span> <span class="n">johnson</span> <span class="n">onthefly</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">cemethod</span> <span class="p">(</span> <span class="o">-</span><span class="n">scholz</span> <span class="n">pb</span> <span class="o">-</span><span class="n">aggrwl</span> <span class="n">johnson</span> <span class="n">onthefly</span> <span class="p">)</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">CIMETHOD</span></code>和<code class="docutils literal notranslate"><span class="pre">CEMETHOD</span></code>是计算CI的方法选择器，分别接受<code class="docutils literal notranslate"><span class="pre">CLARK,</span> <span class="pre">AR,</span> <span class="pre">VORONOV,</span> <span class="pre">JOHNSON,</span> <span class="pre">VS,</span> <span class="pre">SHAH,</span> <span class="pre">ONTHEFLY</span></code>和<code class="docutils literal notranslate"><span class="pre">SEATON,</span> <span class="pre">VREGE,</span> <span class="pre">SCHOLZ,</span> <span class="pre">PB,</span> <span class="pre">VS,</span> <span class="pre">JOHNSON,</span> <span class="pre">AGGRWL,</span> <span class="pre">ONTHEFLY</span></code>这些参数。想打开的话将参数放到括号里面即可，关闭的话在前面加个减号（注意它们有默认打开的参数）。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CSDW</span> <span class="p">(</span> <span class="mf">1.</span> <span class="p">)</span>  <span class="n">FSTKM</span> <span class="p">(</span> <span class="mf">1.</span> <span class="p">)</span>  <span class="n">ISTARK</span> <span class="p">(</span> <span class="mi">89</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">IHSSW</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>  <span class="o">&gt;</span>

</pre></div>
</div>
<p>这些参数和Stark致宽有关，都是默认值。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jedit</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>  <span class="n">jnedp</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>  <span class="o">&gt;</span>
</pre></div>
</div>
<p>这两个和N-editing有关，暂时不知道是什么意思。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">LSFPRINT</span>  <span class="mi">2</span>  <span class="mi">1</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>  <span class="n">LSFFDB</span>  <span class="mi">2</span>  <span class="mi">1</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>  <span class="n">PROF</span>  <span class="mi">2</span>  <span class="mi">1</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">LSFPRINT</span>  <span class="mi">3</span>  <span class="mi">1</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>  <span class="n">LSFFDB</span>  <span class="mi">3</span>  <span class="mi">1</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>  <span class="n">PROF</span>  <span class="mi">3</span>  <span class="mi">1</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">LSFPRINT</span>  <span class="mi">3</span>  <span class="mi">2</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>  <span class="n">lsffdb</span>  <span class="mi">3</span>  <span class="mi">2</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>  <span class="n">prof</span>  <span class="mi">3</span>  <span class="mi">2</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">LSFPRINT</span>  <span class="mi">4</span>  <span class="mi">2</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>  <span class="n">lsffdb</span>  <span class="mi">4</span>  <span class="mi">2</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>  <span class="n">prof</span>  <span class="mi">4</span>  <span class="mi">2</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">LSFPRINT</span>  <span class="mi">5</span>  <span class="mi">2</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>  <span class="n">lsffdb</span>  <span class="mi">5</span>  <span class="mi">2</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>  <span class="n">prof</span>  <span class="mi">5</span>  <span class="mi">2</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>
<span class="n">LSFTYP</span>  <span class="mi">4</span>  <span class="mi">2</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">LSFTYP</span>  <span class="mi">4</span>  <span class="mi">3</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">LSFTYP</span>  <span class="mi">5</span>  <span class="mi">2</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">LSFTYP</span>  <span class="mi">5</span>  <span class="mi">3</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">LSFTYP</span>  <span class="mi">5</span>  <span class="mi">4</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">&gt;</span>

</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">LSFPRINT</span></code>控制输出的line source function详细程度，默认是1；<code class="docutils literal notranslate"><span class="pre">LSFFDB</span></code>是LSF背景选择，用1应该好一点。<code class="docutils literal notranslate"><span class="pre">PROF</span></code>就不用说了，有它才有谱线出来。
<code class="docutils literal notranslate"><span class="pre">LSFTYP</span></code>是解LSF方法的选择器，一般是1（参见Note*48）。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">KRATE</span>  <span class="mi">3</span>  <span class="mi">2</span> <span class="p">(</span> <span class="mi">2</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">KRATE</span>  <span class="mi">4</span>  <span class="mi">2</span> <span class="p">(</span> <span class="mi">2</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">KRATE</span>  <span class="mi">4</span>  <span class="mi">3</span> <span class="p">(</span> <span class="mi">2</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">KRATE</span>  <span class="mi">5</span>  <span class="mi">2</span> <span class="p">(</span> <span class="mi">2</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">KRATE</span>  <span class="mi">5</span>  <span class="mi">3</span> <span class="p">(</span> <span class="mi">2</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">KRATE</span>  <span class="mi">5</span>  <span class="mi">4</span> <span class="p">(</span> <span class="mi">2</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>
<span class="n">BLCSW</span>  <span class="mi">2</span> <span class="mi">1</span> <span class="p">(</span> <span class="mi">15</span> <span class="p">)</span>  <span class="n">BLCSW</span>  <span class="mi">3</span> <span class="mi">1</span> <span class="p">(</span> <span class="mi">15</span> <span class="p">)</span>  <span class="n">BLCSW</span>  <span class="mi">3</span> <span class="mi">2</span> <span class="p">(</span> <span class="mi">15</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>
<span class="n">USE</span> <span class="p">(</span> <span class="n">RESTART</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">KRATE</span></code>控制统计平衡方程里面某些项的建立。1是从密度计算，2是从Jbar计算（可能2比较好？）
<code class="docutils literal notranslate"><span class="pre">BLCSW</span></code>是damping constent选择器，决定有无辐射, van der Waals, Stark, resonance, ion collision致宽。<strong>应该是重要的参数</strong>[改变的话对线心轮廓有比较大的影响。]</p>
<p>然后RESTART文件里面有一大堆参数，需要参考restart过程从rst文件中搞过来。</p>
<p>继续看主控制文件。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">metse</span> <span class="mi">2</span> <span class="mi">1</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">metse</span> <span class="mi">3</span> <span class="mi">1</span> <span class="p">(</span> <span class="mi">0</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">metse</span> <span class="mi">3</span> <span class="mi">2</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">metse</span> <span class="mi">4</span> <span class="mi">1</span> <span class="p">(</span> <span class="mi">0</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">metse</span> <span class="mi">4</span> <span class="mi">2</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">metse</span> <span class="mi">4</span> <span class="mi">3</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">metse</span> <span class="mi">5</span> <span class="mi">1</span> <span class="p">(</span> <span class="mi">0</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">metse</span> <span class="mi">5</span> <span class="mi">2</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">metse</span> <span class="mi">5</span> <span class="mi">3</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">metse</span> <span class="mi">5</span> <span class="mi">4</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">&gt;</span>

</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">metse</span></code>决定了怎么去计算统计平衡方程。输出的LINE (U/L)中有推荐方法，可以去那里看。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">smooth</span> <span class="mi">2</span> <span class="mi">1</span> <span class="p">(</span> <span class="n">IFS</span> <span class="mi">25</span> <span class="n">ILS</span> <span class="mi">40</span> <span class="n">WSM</span> <span class="mf">.5</span> <span class="p">)</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p>RHO的平滑方法。<code class="docutils literal notranslate"><span class="pre">WSM</span></code>是平滑强度，其他两个控制平滑的范围。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">IOMX</span> <span class="p">(</span> <span class="mi">11</span> <span class="p">)</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p>迭代的次数。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bdopt</span> <span class="p">(</span> <span class="n">bdr</span> <span class="p">)</span>  <span class="n">rhopt</span> <span class="p">(</span> <span class="n">rhos</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">wrmn</span> <span class="p">(</span> <span class="mf">0.4</span> <span class="p">)</span>  <span class="n">wrmx</span> <span class="p">(</span> <span class="mf">0.9</span> <span class="p">)</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">bdopt</span></code>是选择计算b-ratio的方法，在输出文件的RHO AND RBD中有讲。<code class="docutils literal notranslate"><span class="pre">rhopt</span></code>类似。<strong>可能要调试一下</strong>。[谱线整体稍微变浅了一丢丢。]
<code class="docutils literal notranslate"><span class="pre">wrmn</span></code>和<code class="docutils literal notranslate"><span class="pre">wrmx</span></code>是调整RHO的权重的系数，不知道有什么用（Note*131）</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TMS</span> <span class="p">(</span> <span class="mf">1.E+10</span> <span class="p">)</span> <span class="o">&gt;</span>  <span class="n">quadratic</span> <span class="k">for</span> <span class="n">larger</span> <span class="n">tau</span>
<span class="n">TLARGE</span> <span class="p">(</span> <span class="mf">500.</span> <span class="p">)</span>  <span class="n">TSMALL</span> <span class="p">(</span> <span class="mf">1.E-10</span> <span class="p">)</span>  <span class="o">&gt;</span>
<span class="n">TSM</span> <span class="p">(</span> <span class="mf">1.E-10</span> <span class="p">)</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p>不知道，<strong>调试吧</strong>。[谱线整体稍微变浅了一丢丢。]</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">WAVES</span> <span class="p">(</span> <span class="mf">1025.6</span> <span class="mf">150.0</span> <span class="mf">60.0</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">WAVES</span> <span class="p">(</span> <span class="mf">911.7</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">WAVES</span> <span class="p">(</span> <span class="mf">227.5</span> <span class="mf">227.9</span> <span class="mf">399.</span> <span class="mf">399.2</span> <span class="mf">400.6</span> <span class="mf">400.8</span> <span class="mf">503.8</span> <span class="mf">504.1</span> <span class="o">&gt;</span>
<span class="mf">911.75</span> <span class="mf">5000.0</span> <span class="mf">6565.</span> <span class="p">)</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p>额外算的连续谱不透明度。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">NABS</span> <span class="n">moved</span> <span class="n">to</span> <span class="o">.</span><span class="n">mod</span> <span class="n">file</span>
<span class="o">&gt;</span>
<span class="n">CWJ</span> <span class="p">(</span> <span class="mf">0.4</span> <span class="p">)</span> <span class="n">CWR</span> <span class="p">(</span> <span class="mf">.05</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">HSEC</span> <span class="p">(</span> <span class="mf">.9</span> <span class="p">)</span>  <span class="n">HEL</span> <span class="p">(</span> <span class="mf">.9</span> <span class="p">)</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p>不知道，<strong>调试吧</strong>。[没有区别]</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">WEP</span> <span class="p">(</span> <span class="mf">.9</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">LMT</span> <span class="p">(</span> <span class="mf">5.</span> <span class="p">)</span>  <span class="n">LMF</span> <span class="p">(</span> <span class="mf">0.</span> <span class="p">)</span>  <span class="n">LME</span> <span class="p">(</span> <span class="mf">.001</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">WSM</span> <span class="p">(</span> <span class="mf">.3</span> <span class="p">)</span>  <span class="n">INFSM</span> <span class="p">(</span> <span class="mi">60</span> <span class="p">)</span>  <span class="n">INLSM</span> <span class="p">(</span> <span class="mi">70</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">LMB</span> <span class="p">(</span> <span class="mf">500.</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">YL</span> <span class="p">(</span> <span class="o">-</span><span class="mf">3.</span> <span class="p">)</span>  <span class="n">YLYM</span> <span class="p">(</span> <span class="n">F</span> <span class="o">-</span><span class="mf">3.</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">***************</span><span class="n">omit</span> <span class="n">when</span> <span class="n">lyman</span><span class="o">=</span><span class="n">off</span>
<span class="o">&gt;</span> <span class="n">EXLYM</span> <span class="p">(</span> <span class="mf">1.E6</span> <span class="p">)</span>  <span class="n">TGLYM</span> <span class="p">(</span> <span class="mf">1.E6</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">***********</span><span class="n">omit</span> <span class="n">when</span> <span class="n">lyman</span><span class="o">=</span><span class="n">off</span>
<span class="o">&gt;</span> <span class="n">METEP</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="n">method</span> <span class="ow">in</span> <span class="n">LYMAN</span>
<span class="o">&gt;</span> <span class="n">kxlym</span> <span class="p">(</span> <span class="mi">0</span> <span class="p">)</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p>有关Lyman线的东西，<strong>调试</strong>。[没有区别，和预期一样]</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">POPUP</span> <span class="p">(</span> <span class="n">HYDROGEN</span> <span class="p">)</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p>需要更新的元素</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">WPOP</span> <span class="p">(</span> <span class="mf">.9</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">WBD</span> <span class="p">(</span> <span class="mf">.9</span> <span class="p">)</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p>数密度和departure coefficient更新权重。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">NDW</span> <span class="p">(</span> <span class="mi">60</span> <span class="p">)</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p>和<code class="docutils literal notranslate"><span class="pre">ND</span></code>差不多的玩意儿。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">WZM</span> <span class="p">(</span> <span class="mf">0.</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="n">weight</span> <span class="k">for</span> <span class="n">newly</span> <span class="n">calculated</span> <span class="n">Z</span>
<span class="n">FZLIM</span> <span class="p">(</span> <span class="mf">1.1</span> <span class="p">)</span> <span class="o">&gt;</span>  <span class="n">Z</span> <span class="kn">from</span><span class="w"> </span><span class="nn">MASS</span> <span class="n">limiting</span> <span class="n">parameter</span>
</pre></div>
</div>
<p>如注释所说。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">CVW</span> <span class="mi">3</span> <span class="mi">2</span> <span class="p">(</span> <span class="mf">.0</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">CSK</span> <span class="mi">3</span> <span class="mi">2</span> <span class="p">(</span> <span class="mf">.0</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">CRS</span> <span class="mi">3</span> <span class="mi">2</span> <span class="p">(</span> <span class="mf">.0</span> <span class="p">)</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p>van de Waals, Stark, resonance致宽宽度。Section 19。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">XI</span> <span class="p">(</span> <span class="mf">0.</span> <span class="mf">0.1</span> <span class="mf">0.2</span>  <span class="mf">0.3</span>  <span class="mf">0.4</span> <span class="mf">0.5</span> <span class="o">&gt;</span>
<span class="o">...</span>
<span class="o">&gt;</span> <span class="mf">48.</span> <span class="mf">48.5</span> <span class="mf">49.</span> <span class="mf">49.5</span> <span class="mf">50.</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">XI</span> <span class="p">(</span> <span class="mf">0.</span> <span class="mf">.1</span> <span class="mf">.2</span> <span class="mf">.3</span> <span class="mf">.4</span> <span class="mf">.5</span> <span class="mf">.6</span> <span class="mf">.7</span> <span class="mf">.8</span> <span class="mf">.9</span> <span class="mf">1.</span> <span class="mf">1.1</span> <span class="mf">1.2</span> <span class="mf">1.3</span> <span class="mf">1.4</span> <span class="mf">1.5</span> <span class="o">&gt;</span>
     <span class="mf">1.6</span> <span class="mf">1.7</span> <span class="mf">1.8</span> <span class="mf">1.9</span> <span class="mf">2.</span> <span class="mf">2.2</span> <span class="mf">2.4</span> <span class="mf">2.6</span> <span class="mf">2.8</span> <span class="mf">3.</span> <span class="mf">3.2</span> <span class="o">&gt;</span>
     <span class="mf">3.4</span> <span class="mf">3.6</span> <span class="mf">3.8</span> <span class="mf">4.</span> <span class="mf">4.25</span> <span class="mf">4.5</span> <span class="mf">4.75</span> <span class="mf">5.</span> <span class="mf">5.25</span> <span class="mf">5.5</span> <span class="mf">5.75</span> <span class="o">&gt;</span>
     <span class="mf">6.</span> <span class="mf">7.</span> <span class="mf">8.</span> <span class="mf">9.</span> <span class="mf">10.</span> <span class="mf">11.</span> <span class="mf">12.</span> <span class="mf">14.</span> <span class="mf">16.</span> <span class="mf">18.</span> <span class="mf">20.</span> <span class="o">&gt;</span>
     <span class="mf">25.</span> <span class="mf">30.</span> <span class="mf">35.</span> <span class="mf">40.</span> <span class="mf">45.</span> <span class="mf">50.</span> <span class="o">&gt;</span>
<span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">KST</span>    <span class="mi">2</span> <span class="mi">1</span> <span class="p">(</span> <span class="mi">44</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">XISYMT</span> <span class="mi">2</span> <span class="mi">1</span> <span class="p">(</span> <span class="mf">0.</span> <span class="mf">.2</span> <span class="mf">.4</span> <span class="mf">.6</span> <span class="mf">.8</span> <span class="mf">1.</span> <span class="mf">1.2</span> <span class="mf">1.4</span> <span class="mf">1.6</span> <span class="mf">1.8</span> <span class="mf">2.</span> <span class="mf">2.2</span> <span class="mf">2.4</span> <span class="mf">2.6</span> <span class="mf">2.6</span> <span class="mf">2.8</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>             <span class="mf">3.6</span> <span class="mf">4.</span> <span class="mf">4.5</span> <span class="mf">5.</span> <span class="mf">6.</span> <span class="mf">8.</span> <span class="mf">10.</span> <span class="mf">12.</span> <span class="mf">15.</span> <span class="mf">20.</span> <span class="mf">30.</span> <span class="mf">40.</span> <span class="mf">60.</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>             <span class="mf">80.</span> <span class="mf">100.</span> <span class="mf">150.</span> <span class="mf">200.</span> <span class="mf">250.</span> <span class="mf">300.</span> <span class="mf">350.</span> <span class="mf">400.</span> <span class="mf">450.</span> <span class="mf">500.</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>             <span class="mf">550.</span> <span class="mf">600.</span> <span class="mf">650.</span> <span class="mf">700.</span> <span class="mf">750.</span> <span class="mf">800.</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">KST</span>    <span class="mi">3</span> <span class="mi">1</span> <span class="p">(</span> <span class="mi">33</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">XISYMT</span> <span class="mi">3</span> <span class="mi">1</span> <span class="p">(</span> <span class="mf">0.</span> <span class="mf">.2</span> <span class="mf">.4</span> <span class="mf">.6</span> <span class="mf">.8</span> <span class="mf">1.</span> <span class="mf">1.3</span> <span class="mf">1.6</span> <span class="mf">2.</span> <span class="mf">2.5</span> <span class="mf">3.</span> <span class="mf">3.5</span> <span class="mf">4.</span> <span class="mf">4.5</span> <span class="mf">5.</span> <span class="mf">6.</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>             <span class="mf">8.</span> <span class="mf">10.</span> <span class="mf">12.</span> <span class="mf">15.</span> <span class="mf">20.</span> <span class="mf">30.</span> <span class="mf">40.</span> <span class="mf">60.</span> <span class="mf">80.</span> <span class="mf">100.</span> <span class="mf">120.</span> <span class="mf">140.</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>             <span class="mf">180.</span> <span class="mf">230.</span> <span class="mf">280.</span> <span class="mf">350.</span> <span class="mf">400.</span> <span class="p">)</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p>谱线覆盖的频率点/单条谱线覆盖的频率点。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">JNUNC</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p>如果有<code class="docutils literal notranslate"><span class="pre">JNU</span></code>的话，<code class="docutils literal notranslate"><span class="pre">JNUNC</span></code>设为1可以读入<code class="docutils literal notranslate"><span class="pre">JNU</span></code>。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">idex</span> <span class="p">(</span> <span class="mi">50</span> <span class="p">)</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p>控制输出的东西。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">SCH</span> <span class="mi">2</span> <span class="mi">1</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>  <span class="n">GMMA</span> <span class="mi">2</span> <span class="mi">1</span> <span class="p">(</span> <span class="o">-</span><span class="mf">0.99</span> <span class="p">)</span>  <span class="n">XC</span> <span class="mi">2</span> <span class="mi">1</span> <span class="p">(</span> <span class="mf">2.</span> <span class="p">)</span>  <span class="n">XR</span> <span class="mi">2</span> <span class="mi">1</span> <span class="p">(</span> <span class="mf">0.005</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">SCH</span> <span class="mi">3</span> <span class="mi">1</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>  <span class="n">GMMA</span> <span class="mi">3</span> <span class="mi">1</span> <span class="p">(</span> <span class="o">-</span><span class="mf">0.99</span> <span class="p">)</span>  <span class="n">XC</span> <span class="mi">3</span> <span class="mi">1</span> <span class="p">(</span> <span class="mf">2.</span> <span class="p">)</span>  <span class="n">XR</span> <span class="mi">3</span> <span class="mi">1</span> <span class="p">(</span> <span class="mf">0.010</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">drlim</span> <span class="p">(</span> <span class="mf">0.005</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">YFLUX</span> <span class="p">(</span> <span class="mf">.1</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>
</pre></div>
</div>
<p>被注释了，先不管。应该是PRD的东西。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">VXS</span>              <span class="p">(</span> <span class="o">&gt;</span>
 <span class="mf">1.00000000E+02</span>  <span class="mf">1.00000000E+02</span>  <span class="mf">1.00000000E+02</span>  <span class="mf">1.00000000E+02</span>  <span class="mf">1.00000000E+02</span>
 <span class="mf">1.00000000E+02</span>  <span class="mf">1.00000000E+02</span>  <span class="mf">1.00000000E+02</span>  <span class="mf">1.00000000E+02</span>  <span class="mf">1.00000000E+02</span>
 <span class="mf">1.00000000E+02</span>  <span class="mf">1.00000000E+02</span>  <span class="mf">9.95000000E+01</span>  <span class="mf">9.80000000E+01</span>  <span class="mf">9.60000000E+01</span>
 <span class="mf">9.30000000E+01</span>  <span class="mf">8.90000000E+01</span>  <span class="mf">8.20000000E+01</span>  <span class="mf">7.50000000E+01</span>  <span class="mf">6.70000000E+01</span>
 <span class="mf">6.00000000E+01</span>  <span class="mf">5.40000000E+01</span>  <span class="mf">4.95000000E+01</span>  <span class="mf">4.60000000E+01</span>  <span class="mf">4.30000000E+01</span>
 <span class="mf">4.00000000E+01</span>  <span class="mf">3.70000000E+01</span>  <span class="mf">3.40000000E+01</span>  <span class="mf">3.10000000E+01</span>  <span class="mf">2.70000000E+01</span>
 <span class="mf">2.25000000E+01</span>  <span class="mf">1.80000000E+01</span>  <span class="mf">1.20000000E+01</span>  <span class="mf">0.60000000E+01</span>  <span class="mf">0.00000000E+00</span>
 <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>
 <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>
 <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>
 <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>
 <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>
 <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>
 <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>
 <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>
<span class="p">)</span> <span class="o">&gt;</span>
<span class="n">GO</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p>turbulence速度。part D结束。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">cvx</span> <span class="p">(</span> <span class="mf">20.</span> <span class="p">)</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p>见Section 16.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MUF</span> <span class="p">(</span> <span class="mf">1.0</span> <span class="mf">.9</span> <span class="mf">.7</span> <span class="mf">.5</span> <span class="mf">.3</span> <span class="mf">.1</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">MU</span> <span class="p">(</span> <span class="mf">1.0</span> <span class="mf">.9</span> <span class="mf">.7</span> <span class="mf">.5</span> <span class="mf">.3</span> <span class="mf">.1</span> <span class="p">)</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p>视线方向指定。开了SPHERE就没有用了。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">lpmlr</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p>mass loss rate输出的开关。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CORMIN</span> <span class="p">(</span> <span class="mf">6500.</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">CORMAX</span> <span class="p">(</span> <span class="mf">6700.</span> <span class="p">)</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p>ORIGINS和CONTRIBUTORS的输出控制。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cvxf</span> <span class="p">(</span> <span class="mf">300.</span> <span class="p">)</span>  <span class="n">wfb</span> <span class="p">(</span> <span class="mf">0.</span> <span class="p">)</span>  <span class="n">fbvmx</span> <span class="p">(</span> <span class="mf">100.</span> <span class="p">)</span>  <span class="o">&gt;</span>
</pre></div>
</div>
<p>flow broadening的东西，<strong>调试</strong>。[没有变化]</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GO</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>
<span class="n">USE</span> <span class="p">(</span> <span class="n">MODEL</span> <span class="p">)</span> <span class="o">&gt;</span>
</pre></div>
</div>
<p>结束了！</p>
</section>
<section id="caii">
<h4>CaII线部分<a class="headerlink" href="#caii" title="此标题的永久链接">#</a></h4>
<p>这里就不说ATOM和MODEL的部分了。之前重复过的也不写了。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">LEID</span>       <span class="n">MODEL</span> <span class="n">LEID</span>   <span class="mi">5</span> <span class="n">L</span> <span class="n">CA</span><span class="o">-</span><span class="n">II</span>    <span class="n">ITER</span> <span class="mi">05</span><span class="o">-</span><span class="mi">15</span>     <span class="mi">13</span><span class="o">-</span><span class="n">Apr</span><span class="o">-</span><span class="mi">13</span>
<span class="o">&gt;</span>  <span class="o">---------</span><span class="mi">1</span><span class="o">------------</span><span class="mi">1</span><span class="o">------------</span><span class="mi">1</span><span class="o">------------</span><span class="mi">1</span><span class="o">------------</span><span class="mi">1</span>
<span class="o">&gt;</span>
<span class="n">USE</span> <span class="p">(</span> <span class="n">MODEL</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">USE</span> <span class="p">(</span> <span class="n">ATOM</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>
<span class="n">K</span>   <span class="p">(</span> <span class="mi">39</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>
<span class="n">LF</span> <span class="p">(</span> <span class="mi">7</span> <span class="p">)</span>  <span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">L</span> <span class="p">(</span> <span class="mi">7</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">NWV</span> <span class="p">(</span> <span class="mi">3</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">nvx</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="n">number</span> <span class="n">of</span> <span class="n">additional</span> <span class="n">expansion</span> <span class="n">velocities</span>
<span class="n">DO</span> <span class="p">(</span> <span class="n">ADDCOPR</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">OMIT</span> <span class="p">(</span> <span class="n">COMPCOPR</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">OMIT</span> <span class="p">(</span> <span class="n">EMERINT</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">DO</span> <span class="p">(</span> <span class="n">EMIPRNT</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">do</span> <span class="p">(</span> <span class="n">expand</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">flwbroad</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">OMIT</span> <span class="p">(</span> <span class="n">iterrho</span> <span class="n">ITERS</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">DO</span> <span class="p">(</span> <span class="n">LINECOPR</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">OMIT</span> <span class="p">(</span> <span class="n">METSW</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">DO</span> <span class="p">(</span> <span class="n">OPAPRNT</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">DO</span> <span class="p">(</span> <span class="n">PHASE2</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">do</span> <span class="p">(</span> <span class="n">prdmeth</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">procprnt</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">OMIT</span> <span class="p">(</span> <span class="n">RATEFULL</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">do</span> <span class="p">(</span> <span class="n">RCOMPRNT</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">DO</span> <span class="p">(</span> <span class="n">RHBPRNT</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">secomp</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">SPECSAV</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">do</span> <span class="p">(</span> <span class="n">sphere</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">do</span> <span class="p">(</span> <span class="n">STANDARD</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">omit</span> <span class="p">(</span> <span class="n">truecopr</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">DO</span> <span class="p">(</span> <span class="n">TAUPRNT</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">OMIT</span> <span class="p">(</span> <span class="n">WAVEPRNT</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>
<span class="n">GO</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>
<span class="n">USE</span> <span class="p">(</span> <span class="n">MODEL</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>
<span class="n">USE</span> <span class="p">(</span> <span class="n">ATOM</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">ldint</span> <span class="p">(</span> <span class="mi">20</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>
<span class="n">KRATE</span> <span class="mi">4</span> <span class="mi">2</span> <span class="p">(</span> <span class="mi">2</span> <span class="p">)</span>  <span class="n">KRATE</span> <span class="mi">5</span> <span class="mi">2</span> <span class="p">(</span> <span class="mi">2</span> <span class="p">)</span>  <span class="n">KRATE</span> <span class="mi">5</span> <span class="mi">3</span> <span class="p">(</span> <span class="mi">2</span> <span class="p">)</span>  <span class="o">&gt;</span>
<span class="n">PROF</span> <span class="mi">4</span> <span class="mi">1</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>  <span class="n">progli</span> <span class="mi">4</span> <span class="mi">1</span> <span class="p">(</span> <span class="mf">2.</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">PROF</span> <span class="mi">4</span> <span class="mi">2</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>  <span class="n">progli</span> <span class="mi">4</span> <span class="mi">2</span> <span class="p">(</span> <span class="mf">2.</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">PROF</span> <span class="mi">5</span> <span class="mi">1</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>  <span class="n">progli</span> <span class="mi">5</span> <span class="mi">1</span> <span class="p">(</span> <span class="mf">2.</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">PROF</span> <span class="mi">5</span> <span class="mi">2</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>  <span class="n">progli</span> <span class="mi">5</span> <span class="mi">2</span> <span class="p">(</span> <span class="mf">2.</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">PROF</span> <span class="mi">5</span> <span class="mi">3</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>  <span class="n">progli</span> <span class="mi">5</span> <span class="mi">3</span> <span class="p">(</span> <span class="mf">2.</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>
<span class="n">USE</span> <span class="p">(</span> <span class="n">RESTART</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>
<span class="n">metse</span> <span class="mi">4</span> <span class="mi">1</span> <span class="p">(</span> <span class="mi">4</span> <span class="p">)</span>  <span class="n">metse</span> <span class="mi">5</span> <span class="mi">1</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">METSE</span> <span class="mi">4</span> <span class="mi">2</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>  <span class="n">METSE</span> <span class="mi">5</span> <span class="mi">2</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>
<span class="n">IOMX</span> <span class="p">(</span> <span class="mi">11</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>
<span class="n">TSM</span> <span class="p">(</span> <span class="mf">1.E-7</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">TMS</span> <span class="p">(</span> <span class="mf">1.E+7</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">XI</span> <span class="p">(</span> <span class="mf">0.</span> <span class="mf">.1</span> <span class="mf">.2</span> <span class="mf">.4</span> <span class="mf">.6</span> <span class="mf">.8</span>  <span class="mf">1.</span> <span class="mf">1.2</span> <span class="mf">1.4</span> <span class="mf">1.6</span> <span class="mf">1.8</span> <span class="mf">2.</span> <span class="mf">2.2</span> <span class="mf">2.4</span> <span class="mf">2.6</span> <span class="mf">2.8</span> <span class="mf">3.</span>
<span class="mf">3.3</span> <span class="mf">3.6</span> <span class="mf">4.</span> <span class="mf">5.</span> <span class="mf">6.</span> <span class="mf">8.</span> <span class="mf">10.</span> <span class="mf">15.</span> <span class="mf">20.</span> <span class="mf">25.</span>
<span class="mf">30.</span> <span class="mf">35.</span> <span class="mf">40.</span> <span class="mf">50.</span> <span class="mf">60.</span> <span class="mf">80.</span> <span class="mf">100.</span> <span class="mf">120.</span> <span class="mf">140.</span> <span class="mf">160.</span> <span class="mf">180.</span> <span class="mf">200.</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">BDOPT</span> <span class="p">(</span> <span class="n">BDQ</span> <span class="p">)</span>  <span class="n">RHOPT</span> <span class="p">(</span> <span class="n">RHOS</span> <span class="p">)</span>  <span class="n">CWR</span> <span class="p">(</span> <span class="mf">.1</span> <span class="p">)</span>  <span class="o">&gt;</span>
<span class="n">wrmn</span> <span class="p">(</span> <span class="mf">0.5</span> <span class="p">)</span>  <span class="n">wrmx</span> <span class="p">(</span> <span class="mf">1.0</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">WPOP</span> <span class="p">(</span> <span class="mf">.6</span> <span class="p">)</span>  <span class="o">&gt;</span>
<span class="n">NDW</span> <span class="p">(</span> <span class="mi">55</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>
<span class="n">JNUNC</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="n">XCL</span> <span class="p">(</span> <span class="mf">2.</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">SCH</span> <span class="mi">4</span> <span class="mi">1</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>  <span class="n">XC</span> <span class="mi">4</span> <span class="mi">1</span> <span class="p">(</span> <span class="mf">2.</span> <span class="p">)</span>  <span class="n">XP</span> <span class="mi">4</span> <span class="mi">1</span> <span class="p">(</span> <span class="mf">2.</span> <span class="p">)</span>  <span class="n">GMMA</span> <span class="mi">4</span> <span class="mi">1</span> <span class="p">(</span> <span class="o">-</span><span class="mf">1.</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">SCH</span> <span class="mi">5</span> <span class="mi">1</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>  <span class="n">XC</span> <span class="mi">5</span> <span class="mi">1</span> <span class="p">(</span> <span class="mf">2.</span> <span class="p">)</span>  <span class="n">XP</span> <span class="mi">5</span> <span class="mi">1</span> <span class="p">(</span> <span class="mf">2.</span> <span class="p">)</span>  <span class="n">GMMA</span> <span class="mi">5</span> <span class="mi">1</span> <span class="p">(</span> <span class="o">-</span><span class="mf">1.</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>
<span class="n">WAVES</span> <span class="p">(</span> <span class="mf">3934.8</span> <span class="mf">3952.</span> <span class="mf">3969.5</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>
<span class="n">VXS</span>              <span class="p">(</span> <span class="o">&gt;</span>
 <span class="mf">1.00000000E+02</span>  <span class="mf">1.00000000E+02</span>  <span class="mf">1.00000000E+02</span>  <span class="mf">1.00000000E+02</span>  <span class="mf">1.00000000E+02</span>
 <span class="mf">1.00000000E+02</span>  <span class="mf">1.00000000E+02</span>  <span class="mf">1.00000000E+02</span>  <span class="mf">1.00000000E+02</span>  <span class="mf">1.00000000E+02</span>
 <span class="mf">1.00000000E+02</span>  <span class="mf">1.00000000E+02</span>  <span class="mf">9.95000000E+01</span>  <span class="mf">9.80000000E+01</span>  <span class="mf">9.60000000E+01</span>
 <span class="mf">9.30000000E+01</span>  <span class="mf">8.90000000E+01</span>  <span class="mf">8.20000000E+01</span>  <span class="mf">7.50000000E+01</span>  <span class="mf">6.70000000E+01</span>
 <span class="mf">6.00000000E+01</span>  <span class="mf">5.40000000E+01</span>  <span class="mf">4.95000000E+01</span>  <span class="mf">4.60000000E+01</span>  <span class="mf">4.30000000E+01</span>
 <span class="mf">4.00000000E+01</span>  <span class="mf">3.70000000E+01</span>  <span class="mf">3.40000000E+01</span>  <span class="mf">3.10000000E+01</span>  <span class="mf">2.70000000E+01</span>
 <span class="mf">2.25000000E+01</span>  <span class="mf">1.80000000E+01</span>  <span class="mf">1.20000000E+01</span>  <span class="mf">0.60000000E+01</span>  <span class="mf">0.00000000E+00</span>
 <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>
 <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>
 <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>
 <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>
 <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>
 <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>
 <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>
 <span class="mf">0.00000000E+00</span>  <span class="mf">0.00000000E+00</span>
<span class="p">)</span> <span class="o">&gt;</span>
<span class="n">GO</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">MUF</span> <span class="p">(</span> <span class="mf">1.</span> <span class="mf">.8</span> <span class="mf">.6</span> <span class="mf">.4</span> <span class="mf">.2</span> <span class="mf">.1</span> <span class="mf">.05</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">MU</span>  <span class="p">(</span> <span class="mf">1.</span> <span class="mf">.8</span> <span class="mf">.6</span> <span class="mf">.4</span> <span class="mf">.2</span> <span class="mf">.1</span> <span class="mf">.05</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">MUF</span> <span class="p">(</span> <span class="mf">1.</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span> <span class="n">MU</span> <span class="p">(</span> <span class="mf">1.</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>
<span class="n">GO</span> <span class="o">&gt;</span> <span class="n">part</span> <span class="n">G</span>
<span class="o">&gt;</span>
<span class="n">USE</span> <span class="p">(</span> <span class="n">MODEL</span> <span class="p">)</span> <span class="o">&gt;</span>
<span class="o">&gt;</span>
<span class="n">GO</span> <span class="o">&gt;</span> <span class="n">part</span> <span class="n">I</span>
</pre></div>
</div>
</section>
<section id="id28">
<h4>需要留意的参数们<a class="headerlink" href="#id28" title="此标题的永久链接">#</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ELEMENT</span></code></p></li>
</ul>
<p>这个是要调整的。为什么示例文件里面的ELEMENT有复数？</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">NABS</span></code></p></li>
</ul>
<p>这个会对谱线轮廓产生巨大变化，而且暂无对应关系，需要问Dupree。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">V</span></code></p></li>
</ul>
<p>V的重要性应该不用说了，反正是需要考虑以及修改的。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CLOGG</span></code>和<code class="docutils literal notranslate"><span class="pre">R1N</span></code></p></li>
</ul>
<p>我还以为logg可以通过具体的高度密度安排来体现，结果也是需要指定的。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">KRATE</span></code></p></li>
</ul>
<p>改变这个会对线心部分的轮廓有比较大的影响.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">XINK</span></code>和<code class="docutils literal notranslate"><span class="pre">FINK</span></code></p></li>
</ul>
<p>这俩倒是对结果没什么很大的影响，不过我还没测试将<code class="docutils literal notranslate"><span class="pre">FINK</span></code>调到一个很高的值会怎么样，以及对于He线来说有了高温层之后还需不需要外加的辐射。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BLCSW</span></code></p></li>
</ul>
<p>改变的话对线心轮廓有比较大的影响。</p>
</section>
</section>
</section>
<section id="section-9">
<h2>Section 9：背景谱线不透明度<a class="headerlink" href="#section-9" title="此标题的永久链接">#</a></h2>
<p>PANDORA在计算谱线源函数的时候需要知道bakcground opacity，或者说是background continuum。这应该指的是OASP中的连续吸收系数。这一节主要讲的是连续吸收系数中其他谱线的贡献以及计算方式。</p>
<p>如果是同种元素的谱线，那么PANDORA中的”blended line”机制可以搞定；对于其他的谱线，一般PANDORA会考虑H，He-II，CO的谱线（可以在输出的ATMOSPHERE中进行确认）。</p>
</section>
<section id="section-18">
<h2>Section 18：合成频率表<a class="headerlink" href="#section-18" title="此标题的永久链接">#</a></h2>
<p>这其实就是合成光谱的频率点；PANDORA有内置的一个表，或者通过指定某些频率，我们可以控制合成光谱的采样点分布。这对于一些宽线（比如CaII H&amp;K）有用。
<code class="docutils literal notranslate"><span class="pre">XISYM</span></code>（长度为<code class="docutils literal notranslate"><span class="pre">KS</span></code>）指定一个通用的轮廓，对所有线都生效；<code class="docutils literal notranslate"><span class="pre">XIBLU</span></code>（长度<code class="docutils literal notranslate"><span class="pre">KB</span></code>）指定蓝半边，</p>
</section>
<section id="pmerge">
<h2>合并程序pmerge<a class="headerlink" href="#pmerge" title="此标题的永久链接">#</a></h2>
<p>PANDORA的运行不是互相独立的。一般来说我们需要先运行H，再运行He，然后运行我们想要的其他元素。在H和He的运行中，我们需要将它们的一些参数（比如说密度等）放到mod文件中；作者为此提供了一个Perl的<code class="docutils literal notranslate"><span class="pre">pmerge</span></code>程序。
程序的使用方法不是很难，这里着重说一下里面的一些坑以及那些参数是需要更新的。</p>
<p>现在的<code class="docutils literal notranslate"><span class="pre">pmerge</span></code>程序中如果mod文件没有需要合并的参数的话，会报错。第一件事情就是将这个改成没有也能加上的功能。这样的话我们需要将这个Perl程序移植到python上来。
目标：实现与pmerge类似的功能，将没有的参数放到合适的地方。</p>
<p>我们进行一揽子处理，将所有的restart数据一起考虑了。</p>
<p>restart数据分布在四个文件中：19 (.rst), 20 (.msc), 21 (.pop), 22 (.jnr)。下面来看看这三个文件都有什么、应该怎么处理。</p>
<section id="rst">
<h3>.rst文件<a class="headerlink" href="#rst" title="此标题的永久链接">#</a></h3>
<p>.rst文件和.res文件是一对双胞胎，在重启的时候只需要将.res文件用.rst文件代替即可。<code class="docutils literal notranslate"><span class="pre">METSW</span></code>与<code class="docutils literal notranslate"><span class="pre">LYMAN</span></code>可以增加在.rst文件里面的内容。</p>
</section>
<section id="msc">
<h3>.msc文件<a class="headerlink" href="#msc" title="此标题的永久链接">#</a></h3>
<p>教程中说如果.mod文件中有与.msc参数重合的话也要相应更新。暂时不管它，因为demo中也没有动。</p>
</section>
<section id="pop">
<h3>.pop文件<a class="headerlink" href="#pop" title="此标题的永久链接">#</a></h3>
<p>需要在.mod文件的开头加上NLH ( 15 )等参数。</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head text-center"><p>条件</p></th>
<th class="head text-center"><p>出现参数</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">HSE</span> <span class="pre">(on)</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">POPUP</span> <span class="pre">(HYDROGEN)</span></code></p></td>
<td class="text-center"><p>NE_i, ZME_i, NC_i</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">HMS</span> <span class="pre">(on)</span></code></p></td>
<td class="text-center"><p>BDHM_i</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">AMDIFF</span> <span class="pre">(on)</span></code> or <code class="docutils literal notranslate"><span class="pre">VELGRAD</span> <span class="pre">(on)</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">VBMB</span></code> not 0</p></td>
<td class="text-center"><p>VBMB_i</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">HSE</span> <span class="pre">(on)</span></code></p></td>
<td class="text-center"><p>NH_i</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">POPUP</span> <span class="pre">(HYDROGEN)</span></code></p></td>
<td class="text-center"><p>NP_i, HN_i^j, BDH_i^j (1&lt;=j&lt;=15)</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">POPUP</span> <span class="pre">(CARBON)</span></code></p></td>
<td class="text-center"><p>CK_i, CN_i^j, BDC_i^j (1&lt;=j&lt;=8)</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">POPUP</span> <span class="pre">(SILICON)</span></code></p></td>
<td class="text-center"><p>SIK_i, SIN_i^j, BDSI_i^j (1&lt;=j&lt;=8)</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">POPUP</span> <span class="pre">(HELIUM)</span></code></p></td>
<td class="text-center"><p>HEK_i, HEN_i^j, BDHE_i^j (1&lt;=j&lt;=13)</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">POPUP</span> <span class="pre">(HELIUM2)</span></code></p></td>
<td class="text-center"><p>HE2K_i, HE2N_i^j, BDHE2_i^j (1&lt;=j&lt;=8)</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">POPUP</span> <span class="pre">(ALUMINUM)</span></code></p></td>
<td class="text-center"><p>ALK_i, ALN_i^j, BDAL_i^j (1&lt;=j&lt;=8)</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">POPUP</span> <span class="pre">(MAGNESIUM)</span></code></p></td>
<td class="text-center"><p>MGK_i, MGN_i^j, BDMG_i^j (1&lt;=j&lt;=8)</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">POPUP</span> <span class="pre">(IRON)</span></code></p></td>
<td class="text-center"><p>FEK_i, FEN_i^j, BDFE_i^j (1&lt;=j&lt;=8)</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">POPUP</span> <span class="pre">(SODIUM)</span></code></p></td>
<td class="text-center"><p>NAK_i, NAN_i^j, BDNA_i^j (1&lt;=j&lt;=8)</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">POPUP</span> <span class="pre">(CALCIUM)</span></code></p></td>
<td class="text-center"><p>CAK_i, CAN_i^j, BDCA_i^j (1&lt;=j&lt;=8)</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">POPUP</span> <span class="pre">(OXYGEN)</span></code></p></td>
<td class="text-center"><p>OK_i, ON_i^j, BDO_i^j (1&lt;=j&lt;=14)</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">POPUP</span> <span class="pre">(OXYGEN2)</span></code></p></td>
<td class="text-center"><p>O2K_i, O2N_i^j, BDO2_i^j (1&lt;=j&lt;=8)</p></td>
</tr>
<tr class="row-even"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">POPUP</span> <span class="pre">(OXYGEN3)</span></code></p></td>
<td class="text-center"><p>O3K_i, O3N_i^j, BDO3_i^j (1&lt;=j&lt;=8)</p></td>
</tr>
<tr class="row-odd"><td class="text-center"><p><code class="docutils literal notranslate"><span class="pre">POPUP</span> <span class="pre">(SULPHUR)</span></code></p></td>
<td class="text-center"><p>SK_i, SN_i^j, BDS_i^j (1&lt;=j&lt;=8)</p></td>
</tr>
</tbody>
</table>
</div>
<p>需要的时候照着这个表打开相应的开关就好了。</p>
<p>demo中的重启script给出了H与He运行后需要更新的参数：</p>
<p>H运行：&#64;NE+,&#64;NP+</p>
<p>He运行：&#64;HE+</p>
<p>这使得<code class="docutils literal notranslate"><span class="pre">HMS</span></code>和<code class="docutils literal notranslate"><span class="pre">HSE</span></code>的打开成为标配。</p>
</section>
<section id="jnr">
<h3>.jnr文件<a class="headerlink" href="#jnr" title="此标题的永久链接">#</a></h3>
<p>它是特殊的restart文件；没有不影响计算，但是程序会叫一声。它的输出与否由<code class="docutils literal notranslate"><span class="pre">JNUPRNT</span></code>决定。如果有这个文件的话将它名字里的.run删掉就好了。</p>
</section>
<section id="id29">
<h3>具体实施<a class="headerlink" href="#id29" title="此标题的永久链接">#</a></h3>
<p>因为很多时候的restart都是全的，所以第一次的话就直接将.pop文件的内容加到.mod文件后面，在NP上方以及最后加上一行<code class="docutils literal notranslate"><span class="pre">USE</span> <span class="pre">(</span> <span class="pre">INPUT</span> <span class="pre">)</span> <span class="pre">&gt;</span></code>，之后的重启就都用pmerge了。</p>
</section>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> 目录
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#fortran">Fortran 编译器选择</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#license">License过期之后</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#csh">安装csh</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#perl">安装Perl</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">文件准备</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">格式大坑</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#wup-section-10">元素数据输入(WUP Section 10)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">原子结构文件以及原子数密度</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">一般信息</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">原子能级</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">能级之间的跃迁</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#mass-motion">致宽与mass motion</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">输入参数介绍</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">选项选择</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">需要注意的选项</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">计算氢时需要注意的选项</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">计算氦时需要注意的选项</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">其他需要注意的选项</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">PANDORA运行种类</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">平面平行层大气与球面大气</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id15">运行</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id16">输出</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id17">输出文件里面的坑</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id18">错误处理</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id19">迭代中的错误处理</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id20">其他错误处理</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id21">输出结果阅读理解</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#options">OPTIONS</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#tables">TABLES</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#iterates">ITERATES</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#prof">PROF</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id22">示例文件</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id23">示例一</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id24">示例二</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id25">示例三</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id26">示例四</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id27">示例六</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#h">H线部分</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#caii">CaII线部分</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id28">需要留意的参数们</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#section-9">Section 9：背景谱线不透明度</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#section-18">Section 18：合成频率表</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pmerge">合并程序pmerge</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#rst">.rst文件</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#msc">.msc文件</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pop">.pop文件</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#jnr">.jnr文件</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id29">具体实施</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
作者： Mingjie Jian
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023, Mingjie Jian.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>